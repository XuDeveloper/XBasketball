var require,define;!function(e){function r(e,r){function t(){clearTimeout(o)}if(!(e in u)){u[e]=!0;var i=document.createElement("script");if(r){var o=setTimeout(r,require.timeout);i.onerror=function(){clearTimeout(o),r()},"onload"in i?i.onload=t:i.onreadystatechange=function(){("loaded"==this.readyState||"complete"==this.readyState)&&t()}}return i.type="text/javascript",i.src=e,n.appendChild(i),i}}function t(e,t,n){var o=i[e]||(i[e]=[]);o.push(t);var a,u=s[e]||{},f=u.pkg;a=f?c[f].url:u.url||e,r(a,n&&function(){n(e)})}var n=document.getElementsByTagName("head")[0],i={},o={},a={},u={},s={},c={};define=function(e,r){o[e]=r;var t=i[e];if(t){for(var n=0,a=t.length;a>n;n++)t[n]();delete i[e]}},require=function(e){e=require.alias(e);var r=a[e];if(r)return r.exports;var t=o[e];if(!t)throw"[ModJS] Cannot find module `"+e+"`";r=a[e]={exports:{}};var n="function"==typeof t?t.apply(r,[require,r.exports,r]):t;return n&&(r.exports=n),r.exports},require.async=function(r,n,i){function a(e){for(var r=0,n=e.length;n>r;r++){var c=e[r];if(c in o){var f=s[c];f&&"deps"in f&&a(f.deps)}else if(!(c in l)){l[c]=!0,p++,t(c,u,i);var f=s[c];f&&"deps"in f&&a(f.deps)}}}function u(){if(0==p--){for(var t=[],i=0,o=r.length;o>i;i++)t[i]=require(r[i]);n&&n.apply(e,t)}}"string"==typeof r&&(r=[r]);for(var c=0,f=r.length;f>c;c++)r[c]=require.alias(r[c]);var l={},p=0;a(r),u()},require.resourceMap=function(e){var r,t;t=e.res;for(r in t)t.hasOwnProperty(r)&&(s[r]=t[r]);t=e.pkg;for(r in t)t.hasOwnProperty(r)&&(c[r]=t[r])},require.loadJs=function(e){r(e)},require.loadCss=function(e){if(e.content){var r=document.createElement("style");r.type="text/css",r.styleSheet?r.styleSheet.cssText=e.content:r.innerHTML=e.content,n.appendChild(r)}else if(e.url){var t=document.createElement("link");t.href=e.url,t.rel="stylesheet",t.type="text/css",n.appendChild(t)}},require.alias=function(e){return e},require.timeout=5e3}(this);
;var Zepto=function(){function t(t){return null==t?String(t):V[Y.call(t)]||"object"}function e(e){return"function"==t(e)}function n(t){return null!=t&&t==t.window}function i(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function r(e){return"object"==t(e)}function o(t){return r(t)&&!n(t)&&Object.getPrototypeOf(t)==Object.prototype}function a(t){return"number"==typeof t.length}function s(t){return O.call(t,function(t){return null!=t})}function u(t){return t.length>0?T.fn.concat.apply([],t):t}function c(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function l(t){return t in A?A[t]:A[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function f(t,e){return"number"!=typeof e||D[c(t)]?e:e+"px"}function h(t){var e,n;return L[t]||(e=M.createElement(t),M.body.appendChild(e),n=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),L[t]=n),L[t]}function p(t){return"children"in t?N.call(t.children):T.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function d(t,e,n){for(E in e)n&&(o(e[E])||G(e[E]))?(o(e[E])&&!o(t[E])&&(t[E]={}),G(e[E])&&!G(t[E])&&(t[E]=[]),d(t[E],e[E],n)):e[E]!==b&&(t[E]=e[E])}function m(t,e){return null==e?T(t):T(t).filter(e)}function g(t,n,i,r){return e(n)?n.call(t,i,r):n}function v(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function y(t,e){var n=t.className||"",i=n&&n.baseVal!==b;return e===b?i?n.baseVal:n:void(i?n.baseVal=e:t.className=e)}function x(t){try{return t?"true"==t||("false"==t?!1:"null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?T.parseJSON(t):t):t}catch(e){return t}}function w(t,e){e(t);for(var n=0,i=t.childNodes.length;i>n;n++)w(t.childNodes[n],e)}var b,E,T,j,S,C,P=[],N=P.slice,O=P.filter,M=window.document,L={},A={},D={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},_=/^\s*<(\w+|!)[^>]*>/,Z=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,$=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,R=/^(?:body|html)$/i,k=/([A-Z])/g,z=["val","css","html","text","data","width","height","offset"],F=["after","prepend","before","append"],q=M.createElement("table"),H=M.createElement("tr"),U={tr:M.createElement("tbody"),tbody:q,thead:q,tfoot:q,td:H,th:H,"*":M.createElement("div")},X=/complete|loaded|interactive/,I=/^[\w-]*$/,V={},Y=V.toString,B={},J=M.createElement("div"),W={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},G=Array.isArray||function(t){return t instanceof Array};return B.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var n=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var i,r=t.parentNode,o=!r;return o&&(r=J).appendChild(t),i=~B.qsa(r,e).indexOf(t),o&&J.removeChild(t),i},S=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},C=function(t){return O.call(t,function(e,n){return t.indexOf(e)==n})},B.fragment=function(t,e,n){var i,r,a;return Z.test(t)&&(i=T(M.createElement(RegExp.$1))),i||(t.replace&&(t=t.replace($,"<$1></$2>")),e===b&&(e=_.test(t)&&RegExp.$1),e in U||(e="*"),a=U[e],a.innerHTML=""+t,i=T.each(N.call(a.childNodes),function(){a.removeChild(this)})),o(n)&&(r=T(i),T.each(n,function(t,e){z.indexOf(t)>-1?r[t](e):r.attr(t,e)})),i},B.Z=function(t,e){return t=t||[],t.__proto__=T.fn,t.selector=e||"",t},B.isZ=function(t){return t instanceof B.Z},B.init=function(t,n){var i;if(!t)return B.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&_.test(t))i=B.fragment(t,RegExp.$1,n),t=null;else{if(n!==b)return T(n).find(t);i=B.qsa(M,t)}else{if(e(t))return T(M).ready(t);if(B.isZ(t))return t;if(G(t))i=s(t);else if(r(t))i=[t],t=null;else if(_.test(t))i=B.fragment(t.trim(),RegExp.$1,n),t=null;else{if(n!==b)return T(n).find(t);i=B.qsa(M,t)}}return B.Z(i,t)},T=function(t,e){return B.init(t,e)},T.extend=function(t){var e,n=N.call(arguments,1);return"boolean"==typeof t&&(e=t,t=n.shift()),n.forEach(function(n){d(t,n,e)}),t},B.qsa=function(t,e){var n,r="#"==e[0],o=!r&&"."==e[0],a=r||o?e.slice(1):e,s=I.test(a);return i(t)&&s&&r?(n=t.getElementById(a))?[n]:[]:1!==t.nodeType&&9!==t.nodeType?[]:N.call(s&&!r?o?t.getElementsByClassName(a):t.getElementsByTagName(e):t.querySelectorAll(e))},T.contains=M.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1},T.type=t,T.isFunction=e,T.isWindow=n,T.isArray=G,T.isPlainObject=o,T.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},T.inArray=function(t,e,n){return P.indexOf.call(e,t,n)},T.camelCase=S,T.trim=function(t){return null==t?"":String.prototype.trim.call(t)},T.uuid=0,T.support={},T.expr={},T.map=function(t,e){var n,i,r,o=[];if(a(t))for(i=0;i<t.length;i++)n=e(t[i],i),null!=n&&o.push(n);else for(r in t)n=e(t[r],r),null!=n&&o.push(n);return u(o)},T.each=function(t,e){var n,i;if(a(t)){for(n=0;n<t.length;n++)if(e.call(t[n],n,t[n])===!1)return t}else for(i in t)if(e.call(t[i],i,t[i])===!1)return t;return t},T.grep=function(t,e){return O.call(t,e)},window.JSON&&(T.parseJSON=JSON.parse),T.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){V["[object "+e+"]"]=e.toLowerCase()}),T.fn={forEach:P.forEach,reduce:P.reduce,push:P.push,sort:P.sort,indexOf:P.indexOf,concat:P.concat,map:function(t){return T(T.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return T(N.apply(this,arguments))},ready:function(t){return X.test(M.readyState)&&M.body?t(T):M.addEventListener("DOMContentLoaded",function(){t(T)},!1),this},get:function(t){return t===b?N.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return P.every.call(this,function(e,n){return t.call(e,n,e)!==!1}),this},filter:function(t){return e(t)?this.not(this.not(t)):T(O.call(this,function(e){return B.matches(e,t)}))},add:function(t,e){return T(C(this.concat(T(t,e))))},is:function(t){return this.length>0&&B.matches(this[0],t)},not:function(t){var n=[];if(e(t)&&t.call!==b)this.each(function(e){t.call(this,e)||n.push(this)});else{var i="string"==typeof t?this.filter(t):a(t)&&e(t.item)?N.call(t):T(t);this.forEach(function(t){i.indexOf(t)<0&&n.push(t)})}return T(n)},has:function(t){return this.filter(function(){return r(t)?T.contains(this,t):T(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!r(t)?t:T(t)},last:function(){var t=this[this.length-1];return t&&!r(t)?t:T(t)},find:function(t){var e,n=this;return e=t?"object"==typeof t?T(t).filter(function(){var t=this;return P.some.call(n,function(e){return T.contains(e,t)})}):1==this.length?T(B.qsa(this[0],t)):this.map(function(){return B.qsa(this,t)}):T()},closest:function(t,e){var n=this[0],r=!1;for("object"==typeof t&&(r=T(t));n&&!(r?r.indexOf(n)>=0:B.matches(n,t));)n=n!==e&&!i(n)&&n.parentNode;return T(n)},parents:function(t){for(var e=[],n=this;n.length>0;)n=T.map(n,function(t){return(t=t.parentNode)&&!i(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return m(e,t)},parent:function(t){return m(C(this.pluck("parentNode")),t)},children:function(t){return m(this.map(function(){return p(this)}),t)},contents:function(){return this.map(function(){return N.call(this.childNodes)})},siblings:function(t){return m(this.map(function(t,e){return O.call(p(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return T.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=h(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var n=e(t);if(this[0]&&!n)var i=T(t).get(0),r=i.parentNode||this.length>1;return this.each(function(e){T(this).wrapAll(n?t.call(this,e):r?i.cloneNode(!0):i)})},wrapAll:function(t){if(this[0]){T(this[0]).before(t=T(t));for(var e;(e=t.children()).length;)t=e.first();T(t).append(this)}return this},wrapInner:function(t){var n=e(t);return this.each(function(e){var i=T(this),r=i.contents(),o=n?t.call(this,e):t;r.length?r.wrapAll(o):i.append(o)})},unwrap:function(){return this.parent().each(function(){T(this).replaceWith(T(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=T(this);(t===b?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return T(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return T(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each(function(e){var n=this.innerHTML;T(this).empty().append(g(this,t,e,n))}):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each(function(e){var n=g(this,t,e,this.textContent);this.textContent=null==n?"":""+n}):0 in this?this[0].textContent:null},attr:function(t,e){var n;return"string"!=typeof t||1 in arguments?this.each(function(n){if(1===this.nodeType)if(r(t))for(E in t)v(this,E,t[E]);else v(this,t,g(this,e,n,this.getAttribute(t)))}):this.length&&1===this[0].nodeType?!(n=this[0].getAttribute(t))&&t in this[0]?this[0][t]:n:b},removeAttr:function(t){return this.each(function(){1===this.nodeType&&t.split(" ").forEach(function(t){v(this,t)},this)})},prop:function(t,e){return t=W[t]||t,1 in arguments?this.each(function(n){this[t]=g(this,e,n,this[t])}):this[0]&&this[0][t]},data:function(t,e){var n="data-"+t.replace(k,"-$1").toLowerCase(),i=1 in arguments?this.attr(n,e):this.attr(n);return null!==i?x(i):b},val:function(t){return 0 in arguments?this.each(function(e){this.value=g(this,t,e,this.value)}):this[0]&&(this[0].multiple?T(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each(function(e){var n=T(this),i=g(this,t,e,n.offset()),r=n.offsetParent().offset(),o={top:i.top-r.top,left:i.left-r.left};"static"==n.css("position")&&(o.position="relative"),n.css(o)});if(!this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,n){if(arguments.length<2){var i,r=this[0];if(!r)return;if(i=getComputedStyle(r,""),"string"==typeof e)return r.style[S(e)]||i.getPropertyValue(e);if(G(e)){var o={};return T.each(e,function(t,e){o[e]=r.style[S(e)]||i.getPropertyValue(e)}),o}}var a="";if("string"==t(e))n||0===n?a=c(e)+":"+f(e,n):this.each(function(){this.style.removeProperty(c(e))});else for(E in e)e[E]||0===e[E]?a+=c(E)+":"+f(E,e[E])+";":this.each(function(){this.style.removeProperty(c(E))});return this.each(function(){this.style.cssText+=";"+a})},index:function(t){return t?this.indexOf(T(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return t?P.some.call(this,function(t){return this.test(y(t))},l(t)):!1},addClass:function(t){return t?this.each(function(e){if("className"in this){j=[];var n=y(this),i=g(this,t,e,n);i.split(/\s+/g).forEach(function(t){T(this).hasClass(t)||j.push(t)},this),j.length&&y(this,n+(n?" ":"")+j.join(" "))}}):this},removeClass:function(t){return this.each(function(e){if("className"in this){if(t===b)return y(this,"");j=y(this),g(this,t,e,j).split(/\s+/g).forEach(function(t){j=j.replace(l(t)," ")}),y(this,j.trim())}})},toggleClass:function(t,e){return t?this.each(function(n){var i=T(this),r=g(this,t,n,y(this));r.split(/\s+/g).forEach(function(t){(e===b?!i.hasClass(t):e)?i.addClass(t):i.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return t===b?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return t===b?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),n=this.offset(),i=R.test(e[0].nodeName)?{top:0,left:0}:e.offset();return n.top-=parseFloat(T(t).css("margin-top"))||0,n.left-=parseFloat(T(t).css("margin-left"))||0,i.top+=parseFloat(T(e[0]).css("border-top-width"))||0,i.left+=parseFloat(T(e[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||M.body;t&&!R.test(t.nodeName)&&"static"==T(t).css("position");)t=t.offsetParent;return t})}},T.fn.detach=T.fn.remove,["width","height"].forEach(function(t){var e=t.replace(/./,function(t){return t[0].toUpperCase()});T.fn[t]=function(r){var o,a=this[0];return r===b?n(a)?a["inner"+e]:i(a)?a.documentElement["scroll"+e]:(o=this.offset())&&o[t]:this.each(function(e){a=T(this),a.css(t,g(this,r,e,a[t]()))})}}),F.forEach(function(e,n){var i=n%2;T.fn[e]=function(){var e,r,o=T.map(arguments,function(n){return e=t(n),"object"==e||"array"==e||null==n?n:B.fragment(n)}),a=this.length>1;return o.length<1?this:this.each(function(t,e){r=i?e:e.parentNode,e=0==n?e.nextSibling:1==n?e.firstChild:2==n?e:null;var s=T.contains(M.documentElement,r);o.forEach(function(t){if(a)t=t.cloneNode(!0);else if(!r)return T(t).remove();r.insertBefore(t,e),s&&w(t,function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},T.fn[i?e+"To":"insert"+(n?"Before":"After")]=function(t){return T(t)[e](this),this}}),B.Z.prototype=T.fn,B.uniq=C,B.deserializeValue=x,T.zepto=B,T}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),function(t){function e(t){return t._zid||(t._zid=h++)}function n(t,n,o,a){if(n=i(n),n.ns)var s=r(n.ns);return(g[e(t)]||[]).filter(function(t){return!(!t||n.e&&t.e!=n.e||n.ns&&!s.test(t.ns)||o&&e(t.fn)!==e(o)||a&&t.sel!=a)})}function i(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function r(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function o(t,e){return t.del&&!y&&t.e in x||!!e}function a(t){return w[t]||y&&x[t]||t}function s(n,r,s,u,l,h,p){var d=e(n),m=g[d]||(g[d]=[]);r.split(/\s/).forEach(function(e){if("ready"==e)return t(document).ready(s);var r=i(e);r.fn=s,r.sel=l,r.e in w&&(s=function(e){var n=e.relatedTarget;return!n||n!==this&&!t.contains(this,n)?r.fn.apply(this,arguments):void 0}),r.del=h;var d=h||s;r.proxy=function(t){if(t=c(t),!t.isImmediatePropagationStopped()){t.data=u;var e=d.apply(n,t._args==f?[t]:[t].concat(t._args));return e===!1&&(t.preventDefault(),t.stopPropagation()),e}},r.i=m.length,m.push(r),"addEventListener"in n&&n.addEventListener(a(r.e),r.proxy,o(r,p))})}function u(t,i,r,s,u){var c=e(t);(i||"").split(/\s/).forEach(function(e){n(t,e,r,s).forEach(function(e){delete g[c][e.i],"removeEventListener"in t&&t.removeEventListener(a(e.e),e.proxy,o(e,u))})})}function c(e,n){return(n||!e.isDefaultPrevented)&&(n||(n=e),t.each(j,function(t,i){var r=n[t];e[t]=function(){return this[i]=b,r&&r.apply(n,arguments)},e[i]=E}),(n.defaultPrevented!==f?n.defaultPrevented:"returnValue"in n?n.returnValue===!1:n.getPreventDefault&&n.getPreventDefault())&&(e.isDefaultPrevented=b)),e}function l(t){var e,n={originalEvent:t};for(e in t)T.test(e)||t[e]===f||(n[e]=t[e]);return c(n,t)}var f,h=1,p=Array.prototype.slice,d=t.isFunction,m=function(t){return"string"==typeof t},g={},v={},y="onfocusin"in window,x={focus:"focusin",blur:"focusout"},w={mouseenter:"mouseover",mouseleave:"mouseout"};v.click=v.mousedown=v.mouseup=v.mousemove="MouseEvents",t.event={add:s,remove:u},t.proxy=function(n,i){var r=2 in arguments&&p.call(arguments,2);if(d(n)){var o=function(){return n.apply(i,r?r.concat(p.call(arguments)):arguments)};return o._zid=e(n),o}if(m(i))return r?(r.unshift(n[i],n),t.proxy.apply(null,r)):t.proxy(n[i],n);throw new TypeError("expected function")},t.fn.bind=function(t,e,n){return this.on(t,e,n)},t.fn.unbind=function(t,e){return this.off(t,e)},t.fn.one=function(t,e,n,i){return this.on(t,e,n,i,1)};var b=function(){return!0},E=function(){return!1},T=/^([A-Z]|returnValue$|layer[XY]$)/,j={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(t,e,n){return this.on(e,t,n)},t.fn.undelegate=function(t,e,n){return this.off(e,t,n)},t.fn.live=function(e,n){return t(document.body).delegate(this.selector,e,n),this},t.fn.die=function(e,n){return t(document.body).undelegate(this.selector,e,n),this},t.fn.on=function(e,n,i,r,o){var a,c,h=this;return e&&!m(e)?(t.each(e,function(t,e){h.on(t,n,i,e,o)}),h):(m(n)||d(r)||r===!1||(r=i,i=n,n=f),(d(i)||i===!1)&&(r=i,i=f),r===!1&&(r=E),h.each(function(f,h){o&&(a=function(t){return u(h,t.type,r),r.apply(this,arguments)}),n&&(c=function(e){var i,o=t(e.target).closest(n,h).get(0);return o&&o!==h?(i=t.extend(l(e),{currentTarget:o,liveFired:h}),(a||r).apply(o,[i].concat(p.call(arguments,1)))):void 0}),s(h,e,r,i,n,c||a)}))},t.fn.off=function(e,n,i){var r=this;return e&&!m(e)?(t.each(e,function(t,e){r.off(t,n,e)}),r):(m(n)||d(i)||i===!1||(i=n,n=f),i===!1&&(i=E),r.each(function(){u(this,e,i,n)}))},t.fn.trigger=function(e,n){return e=m(e)||t.isPlainObject(e)?t.Event(e):c(e),e._args=n,this.each(function(){e.type in x&&"function"==typeof this[e.type]?this[e.type]():"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,n)})},t.fn.triggerHandler=function(e,i){var r,o;return this.each(function(a,s){r=l(m(e)?t.Event(e):e),r._args=i,r.target=s,t.each(n(s,e.type||e),function(t,e){return o=e.proxy(r),r.isImmediatePropagationStopped()?!1:void 0})}),o},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return 0 in arguments?this.bind(e,t):this.trigger(e)}}),t.Event=function(t,e){m(t)||(e=t,t=e.type);var n=document.createEvent(v[t]||"Events"),i=!0;if(e)for(var r in e)"bubbles"==r?i=!!e[r]:n[r]=e[r];return n.initEvent(t,i,!0),c(n)}}(Zepto),function(t){function e(e,n,i){var r=t.Event(n);return t(e).trigger(r,i),!r.isDefaultPrevented()}function n(t,n,i,r){return t.global?e(n||y,i,r):void 0}function i(e){e.global&&0===t.active++&&n(e,null,"ajaxStart")}function r(e){e.global&&!--t.active&&n(e,null,"ajaxStop")}function o(t,e){var i=e.context;return e.beforeSend.call(i,t,e)===!1||n(e,i,"ajaxBeforeSend",[t,e])===!1?!1:void n(e,i,"ajaxSend",[t,e])}function a(t,e,i,r){var o=i.context,a="success";i.success.call(o,t,a,e),r&&r.resolveWith(o,[t,a,e]),n(i,o,"ajaxSuccess",[e,i,t]),u(a,e,i)}function s(t,e,i,r,o){var a=r.context;r.error.call(a,i,e,t),o&&o.rejectWith(a,[i,e,t]),n(r,a,"ajaxError",[i,r,t||e]),u(e,i,r)}function u(t,e,i){var o=i.context;i.complete.call(o,e,t),n(i,o,"ajaxComplete",[e,i]),r(i)}function c(){}function l(t){return t&&(t=t.split(";",2)[0]),t&&(t==T?"html":t==E?"json":w.test(t)?"script":b.test(t)&&"xml")||"text"}function f(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function h(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=f(e.url,e.data),e.data=void 0)}function p(e,n,i,r){return t.isFunction(n)&&(r=i,i=n,n=void 0),t.isFunction(i)||(r=i,i=void 0),{url:e,data:n,success:i,dataType:r}}function d(e,n,i,r){var o,a=t.isArray(n),s=t.isPlainObject(n);t.each(n,function(n,u){o=t.type(u),r&&(n=i?r:r+"["+(s||"object"==o||"array"==o?n:"")+"]"),!r&&a?e.add(u.name,u.value):"array"==o||!i&&"object"==o?d(e,u,i,n):e.add(n,u)})}var m,g,v=0,y=window.document,x=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,w=/^(?:text|application)\/javascript/i,b=/^(?:text|application)\/xml/i,E="application/json",T="text/html",j=/^\s*$/,S=y.createElement("a");S.href=window.location.href,t.active=0,t.ajaxJSONP=function(e,n){if(!("type"in e))return t.ajax(e);var i,r,u=e.jsonpCallback,c=(t.isFunction(u)?u():u)||"jsonp"+ ++v,l=y.createElement("script"),f=window[c],h=function(e){t(l).triggerHandler("error",e||"abort")},p={abort:h};return n&&n.promise(p),t(l).on("load error",function(o,u){clearTimeout(r),t(l).off().remove(),"error"!=o.type&&i?a(i[0],p,e,n):s(null,u||"error",p,e,n),window[c]=f,i&&t.isFunction(f)&&f(i[0]),f=i=void 0}),o(p,e)===!1?(h("abort"),p):(window[c]=function(){i=arguments},l.src=e.url.replace(/\?(.+)=\?/,"?$1="+c),y.head.appendChild(l),e.timeout>0&&(r=setTimeout(function(){h("timeout")},e.timeout)),p)},t.ajaxSettings={type:"GET",beforeSend:c,success:c,error:c,complete:c,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:E,xml:"application/xml, text/xml",html:T,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},t.ajax=function(e){var n,r=t.extend({},e||{}),u=t.Deferred&&t.Deferred();for(m in t.ajaxSettings)void 0===r[m]&&(r[m]=t.ajaxSettings[m]);i(r),r.crossDomain||(n=y.createElement("a"),n.href=r.url,n.href=n.href,r.crossDomain=S.protocol+"//"+S.host!=n.protocol+"//"+n.host),r.url||(r.url=window.location.toString()),h(r);var p=r.dataType,d=/\?.+=\?/.test(r.url);if(d&&(p="jsonp"),r.cache!==!1&&(e&&e.cache===!0||"script"!=p&&"jsonp"!=p)||(r.url=f(r.url,"_="+Date.now())),"jsonp"==p)return d||(r.url=f(r.url,r.jsonp?r.jsonp+"=?":r.jsonp===!1?"":"callback=?")),t.ajaxJSONP(r,u);var v,x=r.accepts[p],w={},b=function(t,e){w[t.toLowerCase()]=[t,e]},E=/^([\w-]+:)\/\//.test(r.url)?RegExp.$1:window.location.protocol,T=r.xhr(),C=T.setRequestHeader;if(u&&u.promise(T),r.crossDomain||b("X-Requested-With","XMLHttpRequest"),b("Accept",x||"*/*"),(x=r.mimeType||x)&&(x.indexOf(",")>-1&&(x=x.split(",",2)[0]),T.overrideMimeType&&T.overrideMimeType(x)),(r.contentType||r.contentType!==!1&&r.data&&"GET"!=r.type.toUpperCase())&&b("Content-Type",r.contentType||"application/x-www-form-urlencoded"),r.headers)for(g in r.headers)b(g,r.headers[g]);if(T.setRequestHeader=b,T.onreadystatechange=function(){if(4==T.readyState){T.onreadystatechange=c,clearTimeout(v);var e,n=!1;if(T.status>=200&&T.status<300||304==T.status||0==T.status&&"file:"==E){p=p||l(r.mimeType||T.getResponseHeader("content-type")),e=T.responseText;try{"script"==p?(1,eval)(e):"xml"==p?e=T.responseXML:"json"==p&&(e=j.test(e)?null:t.parseJSON(e))}catch(i){n=i}n?s(n,"parsererror",T,r,u):a(e,T,r,u)}else s(T.statusText||null,T.status?"error":"abort",T,r,u)}},o(T,r)===!1)return T.abort(),s(null,"abort",T,r,u),T;if(r.xhrFields)for(g in r.xhrFields)T[g]=r.xhrFields[g];var P="async"in r?r.async:!0;T.open(r.type,r.url,P,r.username,r.password);for(g in w)C.apply(T,w[g]);return r.timeout>0&&(v=setTimeout(function(){T.onreadystatechange=c,T.abort(),s(null,"timeout",T,r,u)},r.timeout)),T.send(r.data?r.data:null),T},t.get=function(){return t.ajax(p.apply(null,arguments))},t.post=function(){var e=p.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=p.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,n,i){if(!this.length)return this;var r,o=this,a=e.split(/\s/),s=p(e,n,i),u=s.success;return a.length>1&&(s.url=a[0],r=a[1]),s.success=function(e){o.html(r?t("<div>").html(e.replace(x,"")).find(r):e),u&&u.apply(o,arguments)},t.ajax(s),this};var C=encodeURIComponent;t.param=function(e,n){var i=[];return i.add=function(e,n){t.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(C(e)+"="+C(n))},d(i,e,n),i.join("&").replace(/%20/g,"+")}}(Zepto),function(t){t.fn.serializeArray=function(){var e,n,i=[],r=function(t){return t.forEach?t.forEach(r):void i.push({name:e,value:t})};return this[0]&&t.each(this[0].elements,function(i,o){n=o.type,e=o.name,e&&"fieldset"!=o.nodeName.toLowerCase()&&!o.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&"file"!=n&&("radio"!=n&&"checkbox"!=n||o.checked)&&r(t(o).val())}),i},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},t.fn.submit=function(e){if(0 in arguments)this.bind("submit",e);else if(this.length){var n=t.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(t){"__proto__"in{}||t.extend(t.zepto,{Z:function(e,n){return e=e||[],t.extend(e,t.fn),e.selector=n||"",e.__Z=!0,e},isZ:function(e){return"array"===t.type(e)&&"__Z"in e}});try{getComputedStyle(void 0)}catch(e){var n=getComputedStyle;window.getComputedStyle=function(t){try{return n(t)}catch(e){return null}}}}(Zepto),function(t){function e(t,e,n,i){return Math.abs(t-e)>=Math.abs(n-i)?t-e>0?"Left":"Right":n-i>0?"Up":"Down"}function n(){l=null,h.last&&(h.el.trigger("longTap"),h={})}function i(){l&&clearTimeout(l),l=null}function r(){s&&clearTimeout(s),u&&clearTimeout(u),c&&clearTimeout(c),l&&clearTimeout(l),s=u=c=l=null,h={}}function o(t){return("touch"==t.pointerType||t.pointerType==t.MSPOINTER_TYPE_TOUCH)&&t.isPrimary}function a(t,e){return t.type=="pointer"+e||t.type.toLowerCase()=="mspointer"+e}var s,u,c,l,f,h={},p=750;t(document).ready(function(){var d,m,g,v,y=0,x=0;"MSGesture"in window&&(f=new MSGesture,f.target=document.body),t(document).bind("MSGestureEnd",function(t){var e=t.velocityX>1?"Right":t.velocityX<-1?"Left":t.velocityY>1?"Down":t.velocityY<-1?"Up":null;e&&(h.el.trigger("swipe"),h.el.trigger("swipe"+e))}).on("touchstart MSPointerDown pointerdown",function(e){(!(v=a(e,"down"))||o(e))&&(g=v?e:e.touches[0],e.touches&&1===e.touches.length&&h.x2&&(h.x2=void 0,h.y2=void 0),d=Date.now(),m=d-(h.last||d),h.el=t("tagName"in g.target?g.target:g.target.parentNode),s&&clearTimeout(s),h.x1=g.pageX,h.y1=g.pageY,m>0&&250>=m&&(h.isDoubleTap=!0),h.last=d,l=setTimeout(n,p),f&&v&&f.addPointer(e.pointerId))}).on("touchmove MSPointerMove pointermove",function(t){(!(v=a(t,"move"))||o(t))&&(g=v?t:t.touches[0],i(),h.x2=g.pageX,h.y2=g.pageY,y+=Math.abs(h.x1-h.x2),x+=Math.abs(h.y1-h.y2))}).on("touchend MSPointerUp pointerup",function(n){(!(v=a(n,"up"))||o(n))&&(i(),h.x2&&Math.abs(h.x1-h.x2)>30||h.y2&&Math.abs(h.y1-h.y2)>30?c=setTimeout(function(){h.el&&(h.el.trigger("swipe"),h.el.trigger("swipe"+e(h.x1,h.x2,h.y1,h.y2))),h={}},0):"last"in h&&(30>y&&30>x?u=setTimeout(function(){var e=t.Event("tap");e.cancelTouch=r,h.el&&h.el.trigger(e),h.isDoubleTap?(h.el&&h.el.trigger("doubleTap"),h={}):s=setTimeout(function(){s=null,h.el&&h.el.trigger("singleTap"),h={}},250)},0):h={}),y=x=0)}).on("touchcancel MSPointerCancel pointercancel",r),t(window).on("scroll",r)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(e){t.fn[e]=function(t){return this.on(e,t)}})}(Zepto),function(t,e){function n(t){return t.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function i(t){return r?r+t:t.toLowerCase()}var r,o,a,s,u,c,l,f,h,p,d="",m={Webkit:"webkit",Moz:"",O:"o"},g=document.createElement("div"),v=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,y={};t.each(m,function(t,n){return g.style[t+"TransitionProperty"]!==e?(d="-"+t.toLowerCase()+"-",r=n,!1):void 0}),o=d+"transform",y[a=d+"transition-property"]=y[s=d+"transition-duration"]=y[c=d+"transition-delay"]=y[u=d+"transition-timing-function"]=y[l=d+"animation-name"]=y[f=d+"animation-duration"]=y[p=d+"animation-delay"]=y[h=d+"animation-timing-function"]="",t.fx={off:r===e&&g.style.transitionProperty===e,speeds:{_default:400,fast:200,slow:600},cssPrefix:d,transitionEnd:i("TransitionEnd"),animationEnd:i("AnimationEnd")},t.fn.animate=function(n,i,r,o,a){return t.isFunction(i)&&(o=i,r=e,i=e),t.isFunction(r)&&(o=r,r=e),t.isPlainObject(i)&&(r=i.easing,o=i.complete,a=i.delay,i=i.duration),i&&(i=("number"==typeof i?i:t.fx.speeds[i]||t.fx.speeds._default)/1e3),a&&(a=parseFloat(a)/1e3),this.anim(n,i,r,o,a)},t.fn.anim=function(i,r,d,m,g){var x,w,b,E={},T="",j=this,S=t.fx.transitionEnd,C=!1;if(r===e&&(r=t.fx.speeds._default/1e3),g===e&&(g=0),t.fx.off&&(r=0),"string"==typeof i)E[l]=i,E[f]=r+"s",E[p]=g+"s",E[h]=d||"linear",S=t.fx.animationEnd;else{w=[];for(x in i)v.test(x)?T+=x+"("+i[x]+") ":(E[x]=i[x],w.push(n(x)));T&&(E[o]=T,w.push(o)),r>0&&"object"==typeof i&&(E[a]=w.join(", "),E[s]=r+"s",E[c]=g+"s",E[u]=d||"linear")}return b=function(e){if("undefined"!=typeof e){if(e.target!==e.currentTarget)return;t(e.target).unbind(S,b)}else t(this).unbind(S,b);C=!0,t(this).css(y),m&&m.call(this)},r>0&&(this.bind(S,b),setTimeout(function(){C||b.call(j)},1e3*(r+g)+25)),this.size()&&this.get(0).clientLeft,this.css(E),0>=r&&setTimeout(function(){j.each(function(){b.call(this)})},0),this},g=null}(Zepto);
;define("underscore",function(n,t,r){(function(){var n=this,e=n._,u={},i=Array.prototype,a=Object.prototype,o=Function.prototype,c=i.push,l=i.slice,f=i.concat,s=a.toString,p=a.hasOwnProperty,h=i.forEach,v=i.map,g=i.reduce,d=i.reduceRight,y=i.filter,m=i.every,b=i.some,w=i.indexOf,x=i.lastIndexOf,_=Array.isArray,j=Object.keys,A=o.bind,E=function(n){return n instanceof E?n:this instanceof E?void(this._wrapped=n):new E(n)};"undefined"!=typeof t?("undefined"!=typeof r&&r.exports&&(t=r.exports=E),t._=E):n._=E,E.VERSION="1.5.2";var O=E.each=E.forEach=function(n,t,r){if(null!=n)if(h&&n.forEach===h)n.forEach(t,r);else if(n.length===+n.length){for(var e=0,i=n.length;i>e;e++)if(t.call(r,n[e],e,n)===u)return}else for(var a=E.keys(n),e=0,i=a.length;i>e;e++)if(t.call(r,n[a[e]],a[e],n)===u)return};E.map=E.collect=function(n,t,r){var e=[];return null==n?e:v&&n.map===v?n.map(t,r):(O(n,function(n,u,i){e.push(t.call(r,n,u,i))}),e)};var k="Reduce of empty array with no initial value";E.reduce=E.foldl=E.inject=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),g&&n.reduce===g)return e&&(t=E.bind(t,e)),u?n.reduce(t,r):n.reduce(t);if(O(n,function(n,i,a){u?r=t.call(e,r,n,i,a):(r=n,u=!0)}),!u)throw new TypeError(k);return r},E.reduceRight=E.foldr=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),d&&n.reduceRight===d)return e&&(t=E.bind(t,e)),u?n.reduceRight(t,r):n.reduceRight(t);var i=n.length;if(i!==+i){var a=E.keys(n);i=a.length}if(O(n,function(o,c,l){c=a?a[--i]:--i,u?r=t.call(e,r,n[c],c,l):(r=n[c],u=!0)}),!u)throw new TypeError(k);return r},E.find=E.detect=function(n,t,r){var e;return F(n,function(n,u,i){return t.call(r,n,u,i)?(e=n,!0):void 0}),e},E.filter=E.select=function(n,t,r){var e=[];return null==n?e:y&&n.filter===y?n.filter(t,r):(O(n,function(n,u,i){t.call(r,n,u,i)&&e.push(n)}),e)},E.reject=function(n,t,r){return E.filter(n,function(n,e,u){return!t.call(r,n,e,u)},r)},E.every=E.all=function(n,t,r){t||(t=E.identity);var e=!0;return null==n?e:m&&n.every===m?n.every(t,r):(O(n,function(n,i,a){return(e=e&&t.call(r,n,i,a))?void 0:u}),!!e)};var F=E.some=E.any=function(n,t,r){t||(t=E.identity);var e=!1;return null==n?e:b&&n.some===b?n.some(t,r):(O(n,function(n,i,a){return e||(e=t.call(r,n,i,a))?u:void 0}),!!e)};E.contains=E.include=function(n,t){return null==n?!1:w&&n.indexOf===w?-1!=n.indexOf(t):F(n,function(n){return n===t})},E.invoke=function(n,t){var r=l.call(arguments,2),e=E.isFunction(t);return E.map(n,function(n){return(e?t:n[t]).apply(n,r)})},E.pluck=function(n,t){return E.map(n,function(n){return n[t]})},E.where=function(n,t,r){return E.isEmpty(t)?r?void 0:[]:E[r?"find":"filter"](n,function(n){for(var r in t)if(t[r]!==n[r])return!1;return!0})},E.findWhere=function(n,t){return E.where(n,t,!0)},E.max=function(n,t,r){if(!t&&E.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.max.apply(Math,n);if(!t&&E.isEmpty(n))return-1/0;var e={computed:-1/0,value:-1/0};return O(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;a>e.computed&&(e={value:n,computed:a})}),e.value},E.min=function(n,t,r){if(!t&&E.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.min.apply(Math,n);if(!t&&E.isEmpty(n))return 1/0;var e={computed:1/0,value:1/0};return O(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;a<e.computed&&(e={value:n,computed:a})}),e.value},E.shuffle=function(n){var t,r=0,e=[];return O(n,function(n){t=E.random(r++),e[r-1]=e[t],e[t]=n}),e},E.sample=function(n,t,r){return arguments.length<2||r?n[E.random(n.length-1)]:E.shuffle(n).slice(0,Math.max(0,t))};var M=function(n){return E.isFunction(n)?n:function(t){return t[n]}};E.sortBy=function(n,t,r){var e=M(t);return E.pluck(E.map(n,function(n,t,u){return{value:n,index:t,criteria:e.call(r,n,t,u)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(e>r||void 0===e)return-1}return n.index-t.index}),"value")};var R=function(n){return function(t,r,e){var u={},i=null==r?E.identity:M(r);return O(t,function(r,a){var o=i.call(e,r,a,t);n(u,o,r)}),u}};E.groupBy=R(function(n,t,r){(E.has(n,t)?n[t]:n[t]=[]).push(r)}),E.indexBy=R(function(n,t,r){n[t]=r}),E.countBy=R(function(n,t){E.has(n,t)?n[t]++:n[t]=1}),E.sortedIndex=function(n,t,r,e){r=null==r?E.identity:M(r);for(var u=r.call(e,t),i=0,a=n.length;a>i;){var o=i+a>>>1;r.call(e,n[o])<u?i=o+1:a=o}return i},E.toArray=function(n){return n?E.isArray(n)?l.call(n):n.length===+n.length?E.map(n,E.identity):E.values(n):[]},E.size=function(n){return null==n?0:n.length===+n.length?n.length:E.keys(n).length},E.first=E.head=E.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:l.call(n,0,t)},E.initial=function(n,t,r){return l.call(n,0,n.length-(null==t||r?1:t))},E.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:l.call(n,Math.max(n.length-t,0))},E.rest=E.tail=E.drop=function(n,t,r){return l.call(n,null==t||r?1:t)},E.compact=function(n){return E.filter(n,E.identity)};var I=function(n,t,r){return t&&E.every(n,E.isArray)?f.apply(r,n):(O(n,function(n){E.isArray(n)||E.isArguments(n)?t?c.apply(r,n):I(n,t,r):r.push(n)}),r)};E.flatten=function(n,t){return I(n,t,[])},E.without=function(n){return E.difference(n,l.call(arguments,1))},E.uniq=E.unique=function(n,t,r,e){E.isFunction(t)&&(e=r,r=t,t=!1);var u=r?E.map(n,r,e):n,i=[],a=[];return O(u,function(r,e){(t?e&&a[a.length-1]===r:E.contains(a,r))||(a.push(r),i.push(n[e]))}),i},E.union=function(){return E.uniq(E.flatten(arguments,!0))},E.intersection=function(n){var t=l.call(arguments,1);return E.filter(E.uniq(n),function(n){return E.every(t,function(t){return E.indexOf(t,n)>=0})})},E.difference=function(n){var t=f.apply(i,l.call(arguments,1));return E.filter(n,function(n){return!E.contains(t,n)})},E.zip=function(){for(var n=E.max(E.pluck(arguments,"length").concat(0)),t=new Array(n),r=0;n>r;r++)t[r]=E.pluck(arguments,""+r);return t},E.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},E.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return e=E.sortedIndex(n,t),n[e]===t?e:-1;e=0>r?Math.max(0,u+r):r}if(w&&n.indexOf===w)return n.indexOf(t,r);for(;u>e;e++)if(n[e]===t)return e;return-1},E.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=null!=r;if(x&&n.lastIndexOf===x)return e?n.lastIndexOf(t,r):n.lastIndexOf(t);for(var u=e?r:n.length;u--;)if(n[u]===t)return u;return-1},E.range=function(n,t,r){arguments.length<=1&&(t=n||0,n=0),r=arguments[2]||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=0,i=new Array(e);e>u;)i[u++]=n,n+=r;return i};var T=function(){};E.bind=function(n,t){var r,e;if(A&&n.bind===A)return A.apply(n,l.call(arguments,1));if(!E.isFunction(n))throw new TypeError;return r=l.call(arguments,2),e=function(){if(!(this instanceof e))return n.apply(t,r.concat(l.call(arguments)));T.prototype=n.prototype;var u=new T;T.prototype=null;var i=n.apply(u,r.concat(l.call(arguments)));return Object(i)===i?i:u}},E.partial=function(n){var t=l.call(arguments,1);return function(){return n.apply(this,t.concat(l.call(arguments)))}},E.bindAll=function(n){var t=l.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return O(t,function(t){n[t]=E.bind(n[t],n)}),n},E.memoize=function(n,t){var r={};return t||(t=E.identity),function(){var e=t.apply(this,arguments);return E.has(r,e)?r[e]:r[e]=n.apply(this,arguments)}},E.delay=function(n,t){var r=l.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},E.defer=function(n){return E.delay.apply(E,[n,1].concat(l.call(arguments,1)))},E.throttle=function(n,t,r){var e,u,i,a=null,o=0;r||(r={});var c=function(){o=r.leading===!1?0:new Date,a=null,i=n.apply(e,u)};return function(){var l=new Date;o||r.leading!==!1||(o=l);var f=t-(l-o);return e=this,u=arguments,0>=f?(clearTimeout(a),a=null,o=l,i=n.apply(e,u)):a||r.trailing===!1||(a=setTimeout(c,f)),i}},E.debounce=function(n,t,r){var e,u,i,a,o;return function(){i=this,u=arguments,a=new Date;var c=function(){var l=new Date-a;t>l?e=setTimeout(c,t-l):(e=null,r||(o=n.apply(i,u)))},l=r&&!e;return e||(e=setTimeout(c,t)),l&&(o=n.apply(i,u)),o}},E.once=function(n){var t,r=!1;return function(){return r?t:(r=!0,t=n.apply(this,arguments),n=null,t)}},E.wrap=function(n,t){return function(){var r=[n];return c.apply(r,arguments),t.apply(this,r)}},E.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length-1;r>=0;r--)t=[n[r].apply(this,t)];return t[0]}},E.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},E.keys=j||function(n){if(n!==Object(n))throw new TypeError("Invalid object");var t=[];for(var r in n)E.has(n,r)&&t.push(r);return t},E.values=function(n){for(var t=E.keys(n),r=t.length,e=new Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},E.pairs=function(n){for(var t=E.keys(n),r=t.length,e=new Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},E.invert=function(n){for(var t={},r=E.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},E.functions=E.methods=function(n){var t=[];for(var r in n)E.isFunction(n[r])&&t.push(r);return t.sort()},E.extend=function(n){return O(l.call(arguments,1),function(t){if(t)for(var r in t)n[r]=t[r]}),n},E.pick=function(n){var t={},r=f.apply(i,l.call(arguments,1));return O(r,function(r){r in n&&(t[r]=n[r])}),t},E.omit=function(n){var t={},r=f.apply(i,l.call(arguments,1));for(var e in n)E.contains(r,e)||(t[e]=n[e]);return t},E.defaults=function(n){return O(l.call(arguments,1),function(t){if(t)for(var r in t)void 0===n[r]&&(n[r]=t[r])}),n},E.clone=function(n){return E.isObject(n)?E.isArray(n)?n.slice():E.extend({},n):n},E.tap=function(n,t){return t(n),n};var N=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof E&&(n=n._wrapped),t instanceof E&&(t=t._wrapped);var u=s.call(n);if(u!=s.call(t))return!1;switch(u){case"[object String]":return n==String(t);case"[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=typeof n||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]==n)return e[i]==t;var a=n.constructor,o=t.constructor;if(a!==o&&!(E.isFunction(a)&&a instanceof a&&E.isFunction(o)&&o instanceof o))return!1;r.push(n),e.push(t);var c=0,l=!0;if("[object Array]"==u){if(c=n.length,l=c==t.length)for(;c--&&(l=N(n[c],t[c],r,e)););}else{for(var f in n)if(E.has(n,f)&&(c++,!(l=E.has(t,f)&&N(n[f],t[f],r,e))))break;if(l){for(f in t)if(E.has(t,f)&&!c--)break;l=!c}}return r.pop(),e.pop(),l};E.isEqual=function(n,t){return N(n,t,[],[])},E.isEmpty=function(n){if(null==n)return!0;if(E.isArray(n)||E.isString(n))return 0===n.length;for(var t in n)if(E.has(n,t))return!1;return!0},E.isElement=function(n){return!(!n||1!==n.nodeType)},E.isArray=_||function(n){return"[object Array]"==s.call(n)},E.isObject=function(n){return n===Object(n)},O(["Arguments","Function","String","Number","Date","RegExp"],function(n){E["is"+n]=function(t){return s.call(t)=="[object "+n+"]"}}),E.isArguments(arguments)||(E.isArguments=function(n){return!(!n||!E.has(n,"callee"))}),"function"!=typeof/./&&(E.isFunction=function(n){return"function"==typeof n}),E.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},E.isNaN=function(n){return E.isNumber(n)&&n!=+n},E.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==s.call(n)},E.isNull=function(n){return null===n},E.isUndefined=function(n){return void 0===n},E.has=function(n,t){return p.call(n,t)},E.noConflict=function(){return n._=e,this},E.identity=function(n){return n},E.times=function(n,t,r){for(var e=Array(Math.max(0,n)),u=0;n>u;u++)e[u]=t.call(r,u);return e},E.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))};var S={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};S.unescape=E.invert(S.escape);var q={escape:new RegExp("["+E.keys(S.escape).join("")+"]","g"),unescape:new RegExp("("+E.keys(S.unescape).join("|")+")","g")};E.each(["escape","unescape"],function(n){E[n]=function(t){return null==t?"":(""+t).replace(q[n],function(t){return S[n][t]})}}),E.result=function(n,t){if(null==n)return void 0;var r=n[t];return E.isFunction(r)?r.call(n):r},E.mixin=function(n){O(E.functions(n),function(t){var r=E[t]=n[t];E.prototype[t]=function(){var n=[this._wrapped];return c.apply(n,arguments),P.call(this,r.apply(E,n))}})};var B=0;E.uniqueId=function(n){var t=++B+"";return n?n+t:t},E.templateSettings={evaluate:/\<\@(.+?)\@\>/g,interpolate:/\<\@=(.+?)\@\>/g,escape:/\<\@-(.+?)\@\>/g};var D=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},C=/\\|'|\r|\n|\t|\u2028|\u2029/g;E.template=function(n,t,r){var e;r=E.defaults({},r,E.templateSettings);var u=new RegExp([(r.escape||D).source,(r.interpolate||D).source,(r.evaluate||D).source].join("|")+"|$","g"),i=0,a="__p+='";n.replace(u,function(t,r,e,u,o){return a+=n.slice(i,o).replace(C,function(n){return"\\"+z[n]}),r&&(a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),e&&(a+="'+\n((__t=("+e+"))==null?'':__t)+\n'"),u&&(a+="';\n"+u+"\n__p+='"),i=o+t.length,t}),a+="';\n",r.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{e=new Function(r.variable||"obj","_",a)}catch(o){throw o.source=a,o}if(t)return e(t,E);var c=function(n){return e.call(this,n,E)};return c.source="function("+(r.variable||"obj")+"){\n"+a+"}",c},E.chain=function(n){return E(n).chain()};var P=function(n){return this._chain?E(n).chain():n};E.mixin(E),O(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=i[n];E.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=n&&"splice"!=n||0!==r.length||delete r[0],P.call(this,r)}}),O(["concat","join","slice"],function(n){var t=i[n];E.prototype[n]=function(){return P.call(this,t.apply(this._wrapped,arguments))}}),E.extend(E.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)});
;!function(){var n=!1,i=function(){!n&&window.__ready&&window.__ready.length&&(n=!0,$.each(window.__ready,function(n,i){i.call(null)}))};window.initEvent=i,$(function(){window.initEvent&&window.initEvent()})}();
;define("common:widget/ui/page-dace/page-dace.js",function(e,t,n){var i=[],a=20;n.exports={init:function(e){this.listenElement(e),this.listenDace()},listenElement:function(e){for(var t="dace-node",n=this.send,i=e.target;!i.getAttribute(t)&&"BODY"!==i.tagName&&(i=i.parentElement););if("BODY"!==i.tagName){var a=i.getAttribute(t);n(a)}},listenDace:function(){var e=this;this.interval=setInterval(function(){window.__dace&&window.__dace.sendEvent&&(clearInterval(e.interval),i&&i.length&&e.send())},5e3)},send:function(e){if(window.__dace){var t=window.__dace.sendEvent;e&&e.length&&t(e),i&&i.length&&(_.each(i,function(e){t(e)}),i=[])}else e&&e.length&&(i.length>=a&&i.shift(),i.push(e))}}});
;define("common:widget/ui/page-tools/page-tools.js",function(t,i,o){"use strict";var n={today:!1,todayHandler:function(){},refreshHandler:function(){location.reload()},backtopHandler:function(){this.target.scrollTop(0)},refresh:!1,reply:!1,post:!1,replyHandler:function(){},postHandler:function(){}},e=__daceDataNameOfPage,s={init:function(t){this.initStatus||(this.initStatus=!0,this.backtopShowStatus=!1,this.$container=null,this.$refresh=null,this.$today=null,this.$backtop=null,this.$reply=null,this.$post=null,this.target=$(t?t.target:window),this.winHeight=t?$(t.target).height():$(window).height(),this._initContainer(),this.bindEvent())},initTools:function(t){if(!this._initToolsStatus){this._initToolsStatus=!0;var i=$.extend(n,t);i.refresh&&(this.$refresh=$("<div>").attr("dace-node",e+"_refresh").addClass("ui-refresh").on("click",$.proxy(i.refreshHandler,this)),this.$container.prepend(this.$refresh)),i.today&&(this.$today=$("<div>").attr("dace-node",e+"_today").addClass("ui-today-link").text("今天").on("click",$.proxy(i.todayHandler,this)),this.$container.prepend(this.$today)),i.reply&&(this.$reply=$("<div>").attr("dace-node",e+"_reply").addClass("ui-reply").html("回复").on("click",function(){window.location.href.indexOf("huya")>-1&&sa.track("huya_reply",{platform:"m站"})}),this.$container.append(this.$reply),$(".ui-reply").on("click",function(){navigator.userAgent.toLowerCase();return HPM.isLogin?void($("#J-reply-box").length&&$("html,body").scrollTop($("#J-reply-box").offset().top)):(HPM.popLogin(),void(window.location.href.indexOf("huya")>-1&&sa.track("huya_loginPopup",{platform:"m站"})))})),i.post&&(window.location.href.indexOf("huya")>-1?(this.$post=$("<a href='/bbs/post/"+HPM.fid+"?source=huya'>").attr("dace-node",e+"_post").addClass("ui-post").html("发帖").on("click",function(){window.location.href.indexOf("huya")>-1&&sa.track("huya_post",{platform:"m站"})}),this.$container.append(this.$post)):(this.$post=$("<a href='/bbs/post/"+HPM.fid+"'>").attr("dace-node",e+"_post").addClass("ui-post").html("发帖").on("click",$.proxy(i.replyHandler,this)),this.$container.append(this.$post)))}this.render()},showBacktop:function(){this._initBackTopStatus||(this._initBackTopStatus=!0,this.$backtop=$("<div>").attr("dace-node",e+"_up").addClass("ui-backtop").html("<em></em>").on("click",$.proxy(n.backtopHandler,this)),this.$reply?this.$reply.before(this.$backtop):this.$container.prepend(this.$backtop)),this.render()},hideBacktop:function(){this.$backtop&&this.$backtop.hide(),this.render()},bindEvent:function(){var t=this;this.target.on("scroll",function(){var i,o=t.target.scrollTop();if(i=o>=2*t.winHeight?!0:!1,$("#J-reply-box").length){var n=$("#J-reply-box").offset().top-t.target.height();o>=n?$(".ui-reply").hide():$(".ui-reply").show()}t.backtopShowStatus!==i&&(t.backtopShowStatus=i,console.log("status",i),i?t.showBacktop():t.hideBacktop())})},_initContainer:function(){if(this.$container=$("<div>").addClass("ui-page-tools"),window.location.href.indexOf("huya")>-1){var t="/bbs/"+HPM.fid+"?source=huya",i=['<a class="ui-goback-tools" href=',t,">回首页","</a>"].join("");this.$container=$("<div>").addClass("ui-page-tools").append(i)}$(document.body).append(this.$container)},render:function(){this.backtopShowStatus&&this.$backtop&&this.$backtop.show(),this.$refresh&&this.$refresh.show(),this.$today&&this.$today.show(),this.$container.show()}};o.exports={init:function(t){s.init(t)},initTools:function(t){s.init(),s.initTools(t)}}});
;define("common:widget/ui/section-exposure/section-exposure.js",function(t,o,i){"use strict";var s={init:function(){this.$section=$("[section-exposure]"),this.$section.length&&(this.posTop=[],this.hasSend=[],this.getElemTop(),this.scrollEvent($(window)),this.bind())},getElemTop:function(){var t=this,o=0,i=0,s="";this.$section.each(function(){o=$(this).offset().top,i=o+$(this).height(),s=$(this).attr("section-exposure"),""!==s&&t.posTop.push({str:s,top:o,height:i})})},bind:function(){var t,o=this,i=null;$(window).on("scroll.sectionexposure",function(){t=$(this),i=setTimeout(function(){o.scrollEvent(t)},200)})},unbind:function(){$(window).off("scroll.sectionexposure")},scrollEvent:function(t){var o=this.posTop.length,i=parseInt(t.scrollTop()),s=0,n=0,e=i+$(window).height();if(!o)return void this.unbind();for(var h=0;o>h;h++)n=h-s,e>=this.posTop[n].top&&(this.send(this.posTop[n].str),s++,this.posTop.splice(n,n+1))},send:function(t){if(window.__dace){var o=window.__dace.sendEvent;t&&t.length&&o(t)}}};i.exports=s});
;define("common:widget/ui/login/login.js",function(i,t,n){"use strict";function o(){this.init()}var s=null;o.prototype={init:function(){return document.getElementById("J_login")?void this.show():(this.render(),void this.show())},render:function(){this.$elem=$("<div />").attr("id","J_login").addClass("hp-login-container"),this.$mask=$("<div />").addClass("hp-login-mask"),$("body").append(this.$mask),$("body").append(this.$elem)},show:function(){var i=$(window).width(),t=($(window).height(),Math.max($(document).height(),$(window).height())),n=($(window).scrollTop(),'<p>该操作需要登录，是否登录？</p><div class="btn-item"><span class="cancel">取消</span><span class="submit"><img src="//assets-m.hoopchina.com.cn/touch/static/common/widget/ui/login/login-icon_f141a6c.png" alt="" />登录</span></div>');this.$mask.css({width:i,height:t}),this.$elem.empty().html(n),$("html").addClass("hide-body-scroll"),$("body").addClass("blur-body"),this.$mask.show(),this.$elem.show(),this.bindEvent()},bindEvent:function(){var i=this;this.$mask.bind("click",function(){i.hide()}),$(".cancel").bind("click",function(){i.hide()}),$(".submit").bind("click",function(){location.href=!HPM.isLogin&&~navigator.userAgent.indexOf("tuhu")?"https://passport.tuhu.cn/OAuth/Authorize?client_id=1ed90135a03749348f49f7929f66575c&redirect_uri=https%3A%2F%2Fpassport.hupu.com%2Fpc%2Ftuhucallback.action&response_type=code&state=568321":window.location.href.indexOf("huya")>-1?HPM.loginUrl.indexOf("project")>-1?HPM.loginUrl.split("project=")[0]+"project=huya":HPM.loginUrl+"&project=huya":HPM.loginUrl})},hide:function(){$("html").removeClass("hide-body-scroll"),$("body").removeClass("blur-body"),this.$mask.hide(),this.$elem.hide()}},n.exports=function(){return s?s.init():s=new o}});
;define("common:widget/ui/tips/tips.js",function(t,i,e){"use strict";var s=null,o=function(t){function i(){var t=$(window),i=t.width(),s=t.height(),o=t.scrollTop(),l=t.scrollLeft(),n=e.width()||100,p=o+s/3,d=l+(i-n)/2;return{top:p,left:d}}if(t&&t.length){var e=$("#J_tips");if(!e.length){var o='<div class="m-tips" id="J_tips"></div>';$("body").append(o),e=$("#J_tips")}clearTimeout(s),e.removeClass("m-tips-hide").html(t).show();var l=i();e.css({top:l.top,left:l.left}),s=setTimeout(function(){clearTimeout(s),e.addClass("m-tips-hide")},1130)}};e.exports=o});
;define("common:widget/ui/page/page.js",function(e,a,t){"use strict";var i,n=e("underscore"),s=e("common:widget/ui/util/util.js"),o=(e("common:widget/ui/tips/tips.js"),e("common:widget/ui/page-dace/page-dace.js")),p=__daceDataNameOfPage,r={container:"#J_page",isAjax:!1,currntPage:1,pageCount:10,paramPn:"pn",indexLink:"",urlFormat:"",pageChange:function(){}},d=window.location.href.indexOf("huya")>-1;i=d?['<a dace-node="<@=pageId@>_homepage" data-page="<@=index.id@>" class="<@if (page == 1){@>disabled<@}@>"  href="<@=index.url@>?source=huya">首页</a>','<a dace-node="<@=pageId@>_previouspage" class="<@if (page < 2){@>disabled<@}@>" data-page="<@=prev.id@>" href="<@=prev.url@>?source=huya">上页</a>','<div class="pager_btn">','<span class="page_num"><@=page@>/<@=pageCount@></span>','<select id="J_selectcontainer"></select>',"</div>",'<a dace-node="<@=pageId@>_nextpage" class="<@if (page > pageCount - 1){@>disabled<@}@>" data-page="<@=next.id@>" href="<@=next.url@>?source=huya">下页</a>','<a dace-node="<@=pageId@>_lastpage" class="<@if (page == pageCount){@> disabled <@}else{@> 1 <@}@>" data-page="<@=last.id@>" href="<@=last.url@>?source=huya">末页</a>'].join(""):['<a dace-node="<@=pageId@>_homepage" data-page="<@=index.id@>" class="<@if (page == 1){@>disabled<@}@>"  href="<@=index.url@>">首页</a>','<a dace-node="<@=pageId@>_previouspage" class="<@if (page < 2){@>disabled<@}@>" data-page="<@=prev.id@>" href="<@=prev.url@>">上页</a>','<div class="pager_btn">','<span class="page_num"><@=page@>/<@=pageCount@></span>','<select id="J_selectcontainer"></select>',"</div>",'<a dace-node="<@=pageId@>_nextpage" class="<@if (page > pageCount - 1){@>disabled<@}@>" data-page="<@=next.id@>" href="<@=next.url@>">下页</a>','<a dace-node="<@=pageId@>_lastpage" class="<@if (page == pageCount){@> disabled <@}else{@> 1 <@}@>" data-page="<@=last.id@>" href="<@=last.url@>">末页</a>'].join("");var c=function(e){this.opts=n.extend({},r,e),this.container=$(this.opts.container),this.selectContainer=this.container.find("#J_selectcontainer"),this.currntPage=parseInt(this.opts.currntPage,10),this.pageCount=parseInt(this.opts.pageCount,10),this.supportPushState=s.isSuportPushState,this.init()};c.prototype={init:function(){if(this.opts.isAjax){var e=1;e=this.supportPushState?parseInt(s.getParamFromPathname(this.opts.urlFormat,"#{page}"),10)||1:parseInt(s.getParamFromHash(this.opts.paramPn),10)||1,e=e>this.pageCount?this.pageCount:e,e=1>e?1:e,this.render(e),console.log(e)}else this.renderSelect();this.pageShow=this.currntPage+" / "+this.pageCount,this.bindEvent()},renderSelect:function(){for(var e=1,a=this.currntPage,t=this.pageCount,i="";t>=e;e++)e===a?(console.log(e),i+="<option value='"+e+"' selected>第"+e+"页</option>"):i+="<option value='"+e+"'>第"+e+"页</option>";this.selectContainer.html(i)},render:function(e){console.log(e);this.currntPage=e,this.pageShow=this.currntPage+" / "+this.pageCount;var a=this.opts.urlFormat,t=this.opts.indexLink,s=e>2?e-1:1,o=e<this.pageCount?e+1:this.pageCount,r={index:{id:t?0:1,url:t||a.replace(/#{page}/,1)},prev:{id:s,url:a.replace(/#{page}/,s)},pageId:p,page:e,pageCount:this.pageCount,next:{id:o,url:a.replace(/#{page}/,o)},last:{id:this.pageCount,url:a.replace(/#{page}/,this.pageCount)}},d=n.template(i,r);this.container.find(".page_num").val(this.pageShow),this.container.html(d),this.selectContainer=this.container.find("#J_selectcontainer"),this.renderSelect()},update:function(e){var a=location.hash,t=this.opts.paramPn,i="";if(this.supportPushState){if(this.opts.urlFormat){{var n=this.opts.urlFormat;location.pathname}i=n.replace(/#{page}/i,e),i+=a,window.location.href.indexOf("huya")>-1&&(i+="?source=huya"),history.pushState({},document.title,i)}}else{if(~a.indexOf(t+"=")){var s=new RegExp(t+"=-?\\d+","ig");i=a.replace(s,t+"="+e)}else i=a+(0===a.indexOf("#")?a.length>0?"&":"":"#")+t+"="+e;location.hash=i}var o=$.proxy(this.opts.pageChange,this);o(e),this.render(e)},bindEvent:function(){{var e=this,a=this.opts.isAjax,t=this.opts.urlFormat;this.pageCount}$(this.opts.container).delegate("a","click",function(t){t.preventDefault();var i=$(t.target),n=i.hasClass("disabled");if(!n){var s=i.data("page");a&&s?e.update(s):location.href=i.attr("href")}}),$(this.opts.container).delegate("#J_selectcontainer","change",function(){var i=parseInt($(this).val(),10);o.send(p+"_selectpage"),i!=e.currntPage?a?e.update(i):(location.href=t.replace("#{page}",i),window.location.href.indexOf("huya")>-1&&(location.href=t.replace("#{page}",i)+"?source=huya")):$(this).blur()})}},t.exports=function(e){return new c(e)}});
;define("common:widget/ui/util/util.js",function(e,t,n){"use strict";var r={elementStyle:document.createElement("div").style,vendor:function(){for(var e,t=["t","webkitT","MozT","msT","OT"],n=0,i=t.length;i>n;n++)if(e=t[n]+"ransform",e in r.elementStyle)return t[n].substr(0,t[n].length-1);return!1},prefixStyle:function(e){return r.vendor()===!1?!1:""===r.vendor()?e:r.vendor()+e.charAt(0).toUpperCase()+e.substr(1)},hasPerspective:function(){var e=r.prefixStyle("perspective")in r.elementStyle;return e&&"webkitPerspective"in r.elementStyle&&r.injectStyles("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t){e=9===t.offsetLeft&&3===t.offsetHeight}),!!e},translateZ:function(){return r.hasPerspective?" translateZ(0)":""},isSuportPushState:!(!history||!history.pushState),getParamFromPathname:function(e,t){var n=location.pathname,r=e.split(t),i="";switch(r.length){case 1:i=n.substr(r[0].length);break;case 2:i=n.substr(r[0].length),i=i.substr(0,i.length-r[1].length)}return i},getParamFromHash:function(e,t){var n=location.hash,r="",i=n.indexOf(e+"=");if(0>i)return r;i+=e.length+1,t=t||"&";var o=n.substr(i).indexOf(t);return r=o>0?n.substring(i,i+o):n.substr(i)},getType:function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},getStart:function(e){if(e.selectionStart||"0"==e.selectionStart)return e.selectionStart;if(window.getSelection){var t=window.getSelection().getRangeAt(0).cloneRange();return t.setStart(e,0),t.toString().length}},insertText:function(e,t){if(e.focus(),document.all){var n=document.selection.createRange();document.selection.empty(),n.text=t,n.collapse(),n.select()}else{var i=r.getStart(e);if("HTMLDivElement"==r.getType(e)){var o=window.getSelection(),s=o.getRangeAt(0),a=s.createContextualFragment(t),l=a.lastChild;s.insertNode(a),s.setStartAfter(l),s.setEndAfter(l),o.removeAllRanges(),o.addRange(s)}else e.value=e.value.substr(0,i)+t+e.value.substr(i)}},getText:function(e){if(document.all){var t=document.selection.createRange();return document.selection.empty(),t.text}if(e.selectionStart||"0"==e.selectionStart){var n="HTMLDivElement"==r.getType(e)?e.innerHTML:e.value;return n.substring(e.selectionStart,e.selectionEnd)}return window.getSelection?window.getSelection().toString():void 0}};n.exports=r});
;define("common:widget/ui/target-jump/target-jump.js",function(t,e,i){i.exports={init:function(t){this.listenElement(t)},listenElement:function(t){var e="data-jump",i=t.target;if("A"!==i.tagName){for(;!i.getAttribute(e)&&"BODY"!==i.tagName;)i=i.parentElement;if("BODY"!==i.tagName){var n=i.getAttribute(e);window.location=n}}}}});
;define("common:widget/ui/dialog/dialog.js",function(i,p,t){"use strict";function n(i){this.init(i)}var o,s={tpl:"",submitCallback:function(){},canelCallback:function(){}};n.prototype={init:function(i){return this.opts=$.extend(!0,{},s,i||{}),this.$popup=$("#J_hpTipPopup"),this.$popup.length?void this.show():void this.render()},render:function(){var i=['<div class="hp-tip-mask" id="J_hpTipMask"></div>','<div class="hp-tip-popup" id="J_hpTipPopup">','<div class="hp-tip-popup-wrap">','<div class="hp-popup-content">',this.opts.tpl,"</div>",'<div class="button-inner">','<a href="javascript:" class="button-cancel J_buttonCanel">取消</a>','<a href="javascript:" class="button-submit J_buttonSubmit">确认</a>',"</div>","</div>","</div>"].join("");$("body").append(i),this.$popup=$(".hp-tip-popup"),this.bind()},bind:function(){var i=this;this.$popup.find(".J_buttonCanel").on("click",function(){i.hide(),i.opts.canelCallback&&i.opts.canelCallback()}),this.$popup.find(".J_buttonSubmit").on("click",function(){i.opts.submitCallback&&i.opts.submitCallback()})},show:function(){$("#J_hpTipMask").show(),$("#J_hpTipPopup").show()},hide:function(){$("#J_hpTipMask").hide(),$("#J_hpTipPopup").hide()}},t.exports=function(i){return o?o.init(i):o=new n(i)}});
;define("common:widget/ui/share/share.js",function(e,t,i){"use strict";function s(e){this.merge(e)}var a=null,o=!1,n=e("common:widget/ui/wechat-share/wechat-share.js"),r={social:["weibo","qzone"],shareConfig:{title:document.title,url:window.location.href,pic:"",summary:"",desc:"",searchPic:!0,source:{appkey:{weibo:"2175967801",tqq:"abe3b0bfec0044ea852fbf1456497950"},ralateUid:{weibo:"1642292081",tqq:"@the_real_hoopchina"},siteName:"虎扑体育"}},buttons:{weibo:{text:"新浪微博",url:"http://service.weibo.com/share/share.php?url={url}&title={title}&pic={pic}&appkey={appkey}&ralateUid={ralateUid}&searchPic={searchPic}"},qzone:{text:"QQ空间",url:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url={url}&title={title}&pics={pic}&summary={summary}&site={site}"},qq:{text:"QQ",url:"http://connect.qq.com/widget/shareqq/index.html?url={url}&title={title}&pics={pic}&summary={summary}&desc={desc}&site={site}"},tqq:{text:"腾讯微博",className:"tqq",url:"http://v.t.qq.com/share/share.php?url={url}&title={title}&pic={pic}&appkey={appkey}"}}},c=function(e,t){function i(t,i){var s="";return s="tqq"===e?i:t}var s=r.shareConfig;s.buttons=r.buttons;{var a=$.extend(!0,{},s,t||{}),o=encodeURIComponent(a.title),n=encodeURIComponent(a.url),c=a.pic,h=encodeURIComponent(a.summary),l=encodeURIComponent(a.desc),d=encodeURIComponent(a.source.site),u=i(a.source.appkey.weibo,a.source.appkey.tqq);i(a.source.ralateUid.weibo,a.source.ralateUid.tqq)}if("undefined"!=typeof a.buttons[e]){var p=c.split("||");p.length>1&&"weibo"!==e&&(c=p[0]),c=encodeURIComponent(c);var m=a.buttons[e].url.replace("{url}",n).replace("{title}",o).replace("{pic}",c).replace("{appkey}",u).replace("{ralateUid}",a.ralateUid).replace("{summary}",h).replace("{site}",d).replace("{desc}",l).replace("{searchPic}",a.searchPic);return m}};s.prototype={merge:function(e){this.config=$.extend(!0,{},r,e||{}),this.init()},init:function(){return document.getElementById("J-share-global")?void this.show():(this.render(),this.show(),this.bindEvent(),void this.createGuide())},render:function(){this.$elem=$("<div />").attr("id","J-share-global").addClass("hp-share-container"),this.$mask=$("<div />").addClass("hp-share-mask"),$("body").append(this.$mask),$("body").append(this.$elem)},bindEvent:function(){var e=(this.config,this);this.$elem.bind("click",function(){e.hide()}),$(window).bind("resize",function(){o&&e.show()})},show:function(){o=!0;var e=this,t=this.config.social,i=(this.config.title,$(window).width()),s=$(window).height(),a=$(document).height(),r=$(window).scrollTop();this.$elem.css({width:i,height:a}),this.$mask.css({width:i,height:a});var h=__daceDataNameOfPage,l="";l+="<ul>",t.forEach(function(t){var i=c(t,e.config);l+="wechat"==t?'<li dace-node="'+h+"_share_"+t+'"><div class="btn-share btn-share-'+t+'"></div></li>':'<li dace-node="'+h+"_share_"+t+'"><a href="'+i+'" target="_blank" class="btn-share btn-share-'+t+'"></a></li>'}),l+="</ul>",this.$elem.empty().html(l);var d=this.$elem.find("ul");if(d.css("margin-top",r+.5*s-25),$("body").addClass("blur-body"),$("html").addClass("hide-body-scroll"),this.$elem.on("touchmove.sharemark",function(e){e.stopPropagation(),e.preventDefault()}),this.config.hasOwnProperty("weChatconfig")){var u=this.config.weChatconfig,p=this.config.safariConfig,e=this;$(".btn-share-wechat").bind("click",function(){p?(setTimeout(function(){e.showGuide()},100),setTimeout(function(){e.hideGuide()},2e3)):setTimeout(function(){var e=new n(u);e.init(2)},0)})}this.$mask.show(),this.$elem.show()},hide:function(){o=!1,$("html").removeClass("hide-body-scroll"),$("body").removeClass("blur-body"),this.$elem.off(".sharemark"),this.$mask.hide(),this.$elem.hide()},createGuide:function(){var e="";e+='<section class="hupu-guide-wrap"><div class="hupu-bg-wrap"></div></section>',$("body").append(e)},hideGuide:function(){$(".hupu-guide-wrap").hide(),$("html").removeClass("hide-body-scroll"),$("body").removeClass("blur-body"),$(".hupu-guide-wrap").off(".sharemark")},showGuide:function(){$("html").addClass("hide-body-scroll"),$(".hupu-guide-wrap").on("touchmove.sharemark",function(e){e.stopPropagation(),e.preventDefault()}),$(".hupu-guide-wrap").show()}},i.exports=function(e){return a?a.merge(e):a=new s(e)}});
;define("common:widget/ui/weixin-tool/weixin-tool.js",function(i,t,n){"use strict";var e={init:function(i){var t=this;this.$wrap=$(i),(this.$wrap.length||this.$wrap.find("img").length)&&(this.$img=this.$wrap.find("img"),this.aIMG=[],this.$img.each(function(){var i="";i=$(this).parent("a.bbs-link").size()?$(this).parent("a.bbs-link").attr("href"):$(this).attr("src"),t.isGIF(i)||t.aIMG.push(i)}),this.aIMG.length&&this.bind())},bind:function(){var i=this,t="";this.$wrap.on("click","img",function(){t=$(this).attr("src"),i.isGIF(t)||(event.preventDefault(),i.getPicInfo(t))})},getPicInfo:function(i){var t=this;if(WeixinJSBridge)try{WeixinJSBridge.invoke("imagePreview",{urls:t.aIMG,current:i})}catch(n){}},isGIF:function(i){return/.gif$/.test(i)}};n.exports={init:function(i){var t=navigator.userAgent.toLowerCase();"micromessenger"==t.match(/MicroMessenger/i)&&e.init(i)}}});
;define("common:widget/ui/authcode/authcode.js",function(t,i,n){"use strict";function c(t){this.init(t)}var o,e=t("common:widget/ui/tips/tips.js"),a=t("common:widget/ui/dialog/dialog.js"),s={canelCallback:function(){},successCallback:function(){}},u={authcode:"/bbs/verificationcode"};c.prototype={init:function(t){this.opts=$.extend(!0,{},s,t||{}),this.render()},render:function(){var t=this,i=['<div class="authcode-content" id="J_authcodeContent">','<input type="text" value="" placeholder="请输入校验码" class="input-authcode J_authcodeInput" maxlength="6">','<a href="javascript:" class="button-authcode J_buttonAuthcodePic"><img src="/bbs/verificationcode" alt=""/></a>',"</div>"].join("");return new a({tpl:i,submitCallback:function(){t.verify()},canelCallback:function(){t.opts.canelCallback&&t.opts.canelCallback()}}),o?void t.getCode():(this.$con=$("#J_authcodeContent"),this.$input=this.$con.find(".J_authcodeInput"),this.$button=this.$con.find(".J_buttonAuthcodePic"),void this.bind())},bind:function(){var t=this;this.$button.on("click",function(){t.getCode()})},verify:function(){var t=this,i=this.$input.val();$.ajax({url:u.authcode,type:"POST",data:{check:1,code:i},dataType:"json",success:function(n){return 200===n.status?void(t.opts.successCallback&&t.opts.successCallback(i)):(t.getCode(),void e(n.msg))}})},getCode:function(){this.$button.find("img").attr("src","/bbs/verificationcode?"+ +new Date)}},n.exports=function(t){return o?o.init(t):o=new c(t)}});
;define("common:widget/ui/upload-image/exif.min.js",function(e,t,r){!function(){function e(e){return!!e.exifdata}function o(e,t){var n,r,o,i,a;for(t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,""),n=atob(e),r=n.length,o=new ArrayBuffer(r),i=new Uint8Array(o),a=0;r>a;a++)i[a]=n.charCodeAt(a);return o}function i(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(){(200==this.status||0===this.status)&&t(this.response)},n.send()}function a(e,t){function n(n){var r=s(n),o=l(n);e.exifdata=r||{},e.iptcdata=o||{},t&&t.call(e)}var r,a,u;e.src?/^data\:/i.test(e.src)?(r=o(e.src),n(r)):/^blob\:/i.test(e.src)?(a=new FileReader,a.onload=function(e){n(e.target.result)},i(e.src,function(e){a.readAsArrayBuffer(e)})):(u=new XMLHttpRequest,u.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";n(u.response),u=null},u.open("GET",e.src,!0),u.responseType="arraybuffer",u.send(null)):window.FileReader&&(e instanceof window.Blob||e instanceof window.File)&&(a=new FileReader,a.onload=function(e){F&&console.log("Got file of length "+e.target.result.byteLength),n(e.target.result)},a.readAsArrayBuffer(e))}function s(e){var t,n,r,o=new DataView(e);if(F&&console.log("Got file of length "+e.byteLength),255!=o.getUint8(0)||216!=o.getUint8(1))return F&&console.log("Not a valid JPEG"),!1;for(n=2,r=e.byteLength;r>n;){if(255!=o.getUint8(n))return F&&console.log("Not a valid marker at offset "+n+", found: "+o.getUint8(n)),!1;if(t=o.getUint8(n+1),F&&console.log(t),225==t)return F&&console.log("Found 0xFFE1 marker"),g(o,n+4,o.getUint16(n+2)-2);n+=2+o.getUint16(n+2)}}function l(e){var t,n,r,o,i,a,s=new DataView(e);if(F&&console.log("Got file of length "+e.byteLength),255!=s.getUint8(0)||216!=s.getUint8(1))return F&&console.log("Not a valid JPEG"),!1;for(t=2,n=e.byteLength,r=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};n>t;){if(r(s,t))return o=s.getUint8(t+7),0!==o%2&&(o+=1),0===o&&(o=4),i=t+8+o,a=s.getUint16(t+6+o),u(e,i,a);t++}}function u(e,t,n){for(var r,o,i,a,s,l=new DataView(e),u={},d=t;t+n>d;)28===l.getUint8(d)&&2===l.getUint8(d+1)&&(a=l.getUint8(d+2),a in P&&(i=l.getInt16(d+3),s=i+5,o=P[a],r=f(l,d+5,i),u.hasOwnProperty(o)?u[o]instanceof Array?u[o].push(r):u[o]=[u[o],r]:u[o]=r)),d++;return u}function d(e,t,n,r,o){var i,a,s,l=e.getUint16(n,!o),u={};for(s=0;l>s;s++)i=n+12*s+2,a=r[e.getUint16(i,!o)],!a&&F&&console.log("Unknown tag: "+e.getUint16(i,!o)),u[a]=c(e,i,t,n,o);return u}function c(e,t,n,r,o){var i,a,s,l,u,d,c=e.getUint16(t+2,!o),g=e.getUint32(t+4,!o),h=e.getUint32(t+8,!o)+n;switch(c){case 1:case 7:if(1==g)return e.getUint8(t+8,!o);for(i=g>4?h:t+8,a=[],l=0;g>l;l++)a[l]=e.getUint8(i+l);return a;case 2:return i=g>4?h:t+8,f(e,i,g-1);case 3:if(1==g)return e.getUint16(t+8,!o);for(i=g>2?h:t+8,a=[],l=0;g>l;l++)a[l]=e.getUint16(i+2*l,!o);return a;case 4:if(1==g)return e.getUint32(t+8,!o);for(a=[],l=0;g>l;l++)a[l]=e.getUint32(h+4*l,!o);return a;case 5:if(1==g)return u=e.getUint32(h,!o),d=e.getUint32(h+4,!o),s=new Number(u/d),s.numerator=u,s.denominator=d,s;for(a=[],l=0;g>l;l++)u=e.getUint32(h+8*l,!o),d=e.getUint32(h+4+8*l,!o),a[l]=new Number(u/d),a[l].numerator=u,a[l].denominator=d;return a;case 9:if(1==g)return e.getInt32(t+8,!o);for(a=[],l=0;g>l;l++)a[l]=e.getInt32(h+4*l,!o);return a;case 10:if(1==g)return e.getInt32(h,!o)/e.getInt32(h+4,!o);for(a=[],l=0;g>l;l++)a[l]=e.getInt32(h+8*l,!o)/e.getInt32(h+4+8*l,!o);return a}}function f(e,t,r){var o="";for(n=t;t+r>n;n++)o+=String.fromCharCode(e.getUint8(n));return o}function g(e,t){var n,r,o,i,a,s,l;if("Exif"!=f(e,t,4))return F&&console.log("Not valid EXIF data! "+f(e,t,4)),!1;if(s=t+6,18761==e.getUint16(s))n=!1;else{if(19789!=e.getUint16(s))return F&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;n=!0}if(42!=e.getUint16(s+2,!n))return F&&console.log("Not valid TIFF data! (no 0x002A)"),!1;if(l=e.getUint32(s+4,!n),8>l)return F&&console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(s+4,!n)),!1;if(r=d(e,s,s+l,m,n),r.ExifIFDPointer){i=d(e,s,s+r.ExifIFDPointer,h,n);for(o in i){switch(o){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":i[o]=S[o][i[o]];break;case"ExifVersion":case"FlashpixVersion":i[o]=String.fromCharCode(i[o][0],i[o][1],i[o][2],i[o][3]);break;case"ComponentsConfiguration":i[o]=S.Components[i[o][0]]+S.Components[i[o][1]]+S.Components[i[o][2]]+S.Components[i[o][3]]}r[o]=i[o]}}if(r.GPSInfoIFDPointer){a=d(e,s,s+r.GPSInfoIFDPointer,p,n);for(o in a){switch(o){case"GPSVersionID":a[o]=a[o][0]+"."+a[o][1]+"."+a[o][2]+"."+a[o][3]}r[o]=a[o]}}return r}var h,m,p,S,P,F=!1,y=this,D=function(e){return e instanceof D?e:this instanceof D?void(this.EXIFwrapped=e):new D(e)};"undefined"!=typeof t?("undefined"!=typeof r&&r.exports&&(t=r.exports=D),t.EXIF=D):y.EXIF=D,h=D.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},m=D.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},p=D.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},S=D.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},P={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"},D.getData=function(t,n){return(t instanceof Image||t instanceof HTMLImageElement)&&!t.complete?!1:(e(t)?n&&n.call(t):a(t,n),!0)},D.getTag=function(t,n){return e(t)?t.exifdata[n]:void 0},D.getAllTags=function(t){if(!e(t))return{};var n,r=t.exifdata,o={};for(n in r)r.hasOwnProperty(n)&&(o[n]=r[n]);return o},D.pretty=function(t){if(!e(t))return"";var n,r=t.exifdata,o="";for(n in r)r.hasOwnProperty(n)&&(o+="object"==typeof r[n]?r[n]instanceof Number?n+" : "+r[n]+" ["+r[n].numerator+"/"+r[n].denominator+"]\r\n":n+" : ["+r[n].length+" values]\r\n":n+" : "+r[n]+"\r\n");return o},D.readFromBinaryFile=function(e){return s(e)},"function"==typeof define&&define.amd&&define("exif-js",[],function(){return D})}.call(this)});
;define("common:widget/ui/upload-image/jpeg_encoder_basic.js",function(r,a,n){function o(r){function a(r){for(var a=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;64>n;n++){var o=_((a[n]*r+50)/100);1>o?o=1:o>255&&(o=255),b[H[n]]=o}for(var e=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],f=0;64>f;f++){var t=_((e[f]*r+50)/100);1>t?t=1:t>255&&(t=255),C[H[f]]=t}for(var i=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],v=0,c=0;8>c;c++)for(var u=0;8>u;u++)M[v]=1/(b[H[v]]*i[c]*i[u]*8),E[v]=1/(C[H[v]]*i[c]*i[u]*8),v++}function n(r,a){for(var n=0,o=0,e=new Array,f=1;16>=f;f++){for(var t=1;t<=r[f];t++)e[a[o]]=[],e[a[o]][0]=n,e[a[o]][1]=f,o++,n++;n*=2}return e}function o(){l=n(J,K),p=n(P,R),D=n(L,O),T=n(V,W)}function e(){for(var r=1,a=2,n=1;15>=n;n++){for(var o=r;a>o;o++)z[32767+o]=n,x[32767+o]=[],x[32767+o][1]=n,x[32767+o][0]=o;for(var e=-(a-1);-r>=e;e++)z[32767+e]=n,x[32767+e]=[],x[32767+e][1]=n,x[32767+e][0]=a-1+e;r<<=1,a<<=1}}function f(){for(var r=0;256>r;r++)G[r]=19595*r,G[r+256>>0]=38470*r,G[r+512>>0]=7471*r+32768,G[r+768>>0]=-11059*r,G[r+1024>>0]=-21709*r,G[r+1280>>0]=32768*r+8421375,G[r+1536>>0]=-27439*r,G[r+1792>>0]=-5329*r}function t(r){for(var a=r[0],n=r[1]-1;n>=0;)a&1<<n&&(S|=1<<U),n--,U--,0>U&&(255==S?(i(255),i(0)):i(S),U=7,S=0)}function i(r){Q.push(F[r])}function v(r){i(r>>8&255),i(255&r)}function c(r,a){var n,o,e,f,t,i,v,c,u,w=0;const g=8,s=64;for(u=0;g>u;++u){n=r[w],o=r[w+1],e=r[w+2],f=r[w+3],t=r[w+4],i=r[w+5],v=r[w+6],c=r[w+7];var y=n+c,d=n-c,A=o+v,m=o-v,h=e+i,l=e-i,p=f+t,D=f-t,T=y+p,j=y-p,_=A+h,b=A-h;r[w]=T+_,r[w+4]=T-_;var C=.707106781*(b+j);r[w+2]=j+C,r[w+6]=j-C,T=D+l,_=l+m,b=m+d;var M=.382683433*(T-b),E=.5411961*T+M,x=1.306562965*b+M,z=.707106781*_,N=d+z,Q=d-z;r[w+5]=Q+E,r[w+3]=Q-E,r[w+1]=N+x,r[w+7]=N-x,w+=8}for(w=0,u=0;g>u;++u){n=r[w],o=r[w+8],e=r[w+16],f=r[w+24],t=r[w+32],i=r[w+40],v=r[w+48],c=r[w+56];var S=n+c,U=n-c,k=o+v,q=o-v,B=e+i,F=e-i,G=f+t,H=f-t,J=S+G,K=S-G,L=k+B,O=k-B;r[w]=J+L,r[w+32]=J-L;var P=.707106781*(O+K);r[w+16]=K+P,r[w+48]=K-P,J=H+F,L=F+q,O=q+U;var R=.382683433*(J-O),V=.5411961*J+R,W=1.306562965*O+R,X=.707106781*L,Y=U+X,Z=U-X;r[w+40]=Z+V,r[w+24]=Z-V,r[w+8]=Y+W,r[w+56]=Y-W,w++}var $;for(u=0;s>u;++u)$=r[u]*a[u],I[u]=$>0?$+.5|0:$-.5|0;return I}function u(){v(65504),v(16),i(74),i(70),i(73),i(70),i(0),i(1),i(1),i(0),v(1),v(1),i(0),i(0)}function w(r,a){v(65472),v(17),i(8),v(a),v(r),i(3),i(1),i(17),i(0),i(2),i(17),i(1),i(3),i(17),i(1)}function g(){v(65499),v(132),i(0);for(var r=0;64>r;r++)i(b[r]);i(1);for(var a=0;64>a;a++)i(C[a])}function s(){v(65476),v(418),i(0);for(var r=0;16>r;r++)i(J[r+1]);for(var a=0;11>=a;a++)i(K[a]);i(16);for(var n=0;16>n;n++)i(L[n+1]);for(var o=0;161>=o;o++)i(O[o]);i(1);for(var e=0;16>e;e++)i(P[e+1]);for(var f=0;11>=f;f++)i(R[f]);i(17);for(var t=0;16>t;t++)i(V[t+1]);for(var c=0;161>=c;c++)i(W[c])}function y(){v(65498),v(12),i(3),i(1),i(0),i(2),i(17),i(3),i(17),i(0),i(63),i(0)}function d(r,a,n,o,e){var f,i=e[0],v=e[240];const u=16,w=63,g=64;for(var s=c(r,a),y=0;g>y;++y)N[H[y]]=s[y];var d=N[0]-n;n=N[0],0==d?t(o[0]):(f=32767+d,t(o[z[f]]),t(x[f]));for(var A=63;A>0&&0==N[A];A--);if(0==A)return t(i),n;for(var m,h=1;A>=h;){for(var l=h;0==N[h]&&A>=h;++h);var p=h-l;if(p>=u){m=p>>4;for(var D=1;m>=D;++D)t(v);p=15&p}f=32767+N[h],t(e[(p<<4)+z[f]]),t(x[f]),h++}return A!=w&&t(i),n}function A(){for(var r=String.fromCharCode,a=0;256>a;a++)F[a]=r(a)}function m(r){if(0>=r&&(r=1),r>100&&(r=100),j!=r){var n=0;n=Math.floor(50>r?5e3/r:200-2*r),a(n),j=r,console.log("Quality set to: "+r+"%")}}function h(){var a=(new Date).getTime();r||(r=50),A(),o(),e(),f(),m(r);var n=(new Date).getTime()-a;console.log("Initialization "+n+"ms")}var l,p,D,T,j,_=(Math.round,Math.floor),b=new Array(64),C=new Array(64),M=new Array(64),E=new Array(64),x=new Array(65535),z=new Array(65535),I=new Array(64),N=new Array(64),Q=[],S=0,U=7,k=new Array(64),q=new Array(64),B=new Array(64),F=new Array(256),G=new Array(2048),H=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],J=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],K=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],O=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],P=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],W=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];this.encode=function(r,a,n){var o=(new Date).getTime();a&&m(a),Q=new Array,S=0,U=7,v(65496),u(),g(),w(r.width,r.height),s(),y();var e=0,f=0,i=0;S=0,U=7,this.encode.displayName="_encode_";for(var c,A,h,j,_,b,C,x,z,I=r.data,N=r.width,F=r.height,H=4*N,J=0;F>J;){for(c=0;H>c;){for(_=H*J+c,b=_,C=-1,x=0,z=0;64>z;z++)x=z>>3,C=4*(7&z),b=_+x*H+C,J+x>=F&&(b-=H*(J+1+x-F)),c+C>=H&&(b-=c+C-H+4),A=I[b++],h=I[b++],j=I[b++],k[z]=(G[A]+G[h+256>>0]+G[j+512>>0]>>16)-128,q[z]=(G[A+768>>0]+G[h+1024>>0]+G[j+1280>>0]>>16)-128,B[z]=(G[A+1280>>0]+G[h+1536>>0]+G[j+1792>>0]>>16)-128;e=d(k,M,e,l,D),f=d(q,E,f,p,T),i=d(B,E,i,p,T),c+=32}J+=8}if(U>=0){var K=[];K[1]=U+1,K[0]=(1<<U+1)-1,t(K)}if(v(65497),n){for(var L=Q.length,O=new Uint8Array(L),P=0;L>P;P++)O[P]=Q[P].charCodeAt();Q=[];var R=(new Date).getTime()-o;return console.log("Encoding time: "+R+"ms"),O}var V="data:image/jpeg;base64,"+btoa(Q.join(""));Q=[];var R=(new Date).getTime()-o;return console.log("Encoding time: "+R+"ms"),V},h()}n.exports=o});
;define("common:widget/ui/upload-image/megapix-image.js",function(e,t,a){!function(){function e(e){var t=e.naturalWidth,a=e.naturalHeight;if(t*a>1048576){var r=document.createElement("canvas");r.width=r.height=1;var i=r.getContext("2d");return i.drawImage(e,-t+1,0),0===i.getImageData(0,0,1,1).data[3]}return!1}function r(e,t,a){var r=document.createElement("canvas");r.width=1,r.height=a;var i=r.getContext("2d");i.drawImage(e,0,0);for(var n=i.getImageData(0,0,1,a).data,o=0,s=a,c=a;c>o;){var h=n[4*(c-1)+3];0===h?s=c:o=c,c=s+o>>1}var d=c/a;return 0===d?1:d}function i(e,t,a){var r=document.createElement("canvas");return n(e,r,t,a),r.toDataURL("image/jpeg",t.quality||.8)}function n(t,a,i,n){var s=t.naturalWidth,c=t.naturalHeight;if(s+c){var h=i.width,d=i.height,g=a.getContext("2d");g.save(),o(a,g,h,d,i.orientation);var l=e(t);l&&(s/=2,c/=2);var u=1024,m=document.createElement("canvas");m.width=m.height=u;for(var f=m.getContext("2d"),w=n?r(t,s,c):1,v=Math.ceil(u*h/s),b=Math.ceil(u*d/c/w),L=0,I=0;c>L;){for(var R=0,p=0;s>R;)f.clearRect(0,0,u,u),f.drawImage(t,-R,-L),g.drawImage(m,0,0,u,u,p,I,v,b),R+=u,p+=v;L+=u,I+=b}g.restore(),m=f=null}}function o(e,t,a,r,i){switch(i){case 5:case 6:case 7:case 8:e.width=r,e.height=a;break;default:e.width=a,e.height=r}switch(i){case 2:t.translate(a,0),t.scale(-1,1);break;case 3:t.translate(a,r),t.rotate(Math.PI);break;case 4:t.translate(0,r),t.scale(1,-1);break;case 5:t.rotate(.5*Math.PI),t.scale(1,-1);break;case 6:t.rotate(.5*Math.PI),t.translate(0,-r);break;case 7:t.rotate(.5*Math.PI),t.translate(a,-r),t.scale(-1,1);break;case 8:t.rotate(-.5*Math.PI),t.translate(-a,0)}}function s(e){if(window.Blob&&e instanceof Blob){if(!c)throw Error("No createObjectURL function found to create blob url");var t=new Image;t.src=c.createObjectURL(e),this.blob=e,e=t}if(!e.naturalWidth&&!e.naturalHeight){var a=this;e.onload=e.onerror=function(){var e=a.imageLoadListeners;if(e){a.imageLoadListeners=null;for(var t=0,r=e.length;r>t;t++)e[t]()}},this.imageLoadListeners=[]}this.srcImage=e}var c=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;s.prototype.render=function(e,t,a){if(this.imageLoadListeners){var r=this;return void this.imageLoadListeners.push(function(){r.render(e,t,a)})}t=t||{};var o=this.srcImage.naturalWidth,s=this.srcImage.naturalHeight,h=t.width,d=t.height,g=t.maxWidth,l=t.maxHeight,u=!this.blob||"image/jpeg"===this.blob.type;h&&!d?d=s*h/o<<0:d&&!h?h=o*d/s<<0:(h=o,d=s),g&&h>g&&(h=g,d=s*h/o<<0),l&&d>l&&(d=l,h=o*d/s<<0);var m={width:h,height:d};for(var f in t)m[f]=t[f];var w=e.tagName.toLowerCase();"img"===w?e.src=i(this.srcImage,m,u):"canvas"===w&&n(this.srcImage,e,m,u),"function"==typeof this.onrender&&this.onrender(e),a&&a(),this.blob&&(this.blob=null,c.revokeObjectURL(this.srcImage.src))},"function"==typeof define&&define.amd?define([],function(){return s}):"object"==typeof t?a.exports=s:this.MegaPixImage=s}()});
;define("common:widget/ui/upload-image/resize-image.js",function(t,e,a){"use strict";function s(t,e){this.$button=$(t),this.opts=$.extend(!0,{},n,e||{}),this.orientation=null,this.init()}var i=(t("underscore"),t("common:widget/ui/upload-image/exif.min.js")),o=(t("common:widget/ui/upload-image/megapix-image.js"),t("common:widget/ui/upload-image/jpeg_encoder_basic.js")),n={width:640,quality:.8,fileSize:3,fileMessage:"上传图片不得大于3M",fileFormat:"jpg|jpeg|png|gif|JPG|PNG|GIF",formatMessage:"图片格式错误，只支持JPG和PNG格式的图片上传",beforeCallback:function(){},successCallback:function(){}};s.prototype.init=function(){this.bind()},s.prototype.bind=function(){var t,e,a,s=this;this.$button.off("change").on("change",function(){if(t=this.files[0],e=window.URL||window.webkitURL,a=e.createObjectURL(t),s.opts.beforeCallback&&s.opts.beforeCallback(this,a,t),(t.size/1024/1024).toFixed(2)>s.opts.fileSize){var o={status:401,message:s.opts.fileMessage};return void(s.opts.successCallback&&s.opts.successCallback(o,$(this)))}if(!/\.(jpg|jpeg|png|gif|JPG|PNG|GIF)$/.test(t.name)){var o={status:402,message:s.opts.formatMessage};return void(s.opts.successCallback&&s.opts.successCallback(o,$(this)))}i.getData(t,function(){s.orientation=i.getTag(t,"Orientation")}),s.base64IMG(a,$(this),t),this.value=""})},s.prototype.base64IMG=function(t,e,a){function s(t,a,s){var n=t.width,r=t.height,c=n/r;n>i.opts.width&&(n=i.opts.width||n,r=n/c);var l=document.createElement("canvas");if(!l.getContext)return void alert("对不起，您的浏览器不支持图片压缩及上传功能，请换个浏览器试试~");var u=l.getContext("2d");if($(l).attr({width:n,height:r}),i.orientation&&i.transformCoordinate(l,n,r,i.orientation),u.drawImage(t,0,0,n,r),window.FileReader){var g=new FileReader;g.onloadend=function(t){var a=t.target.result,o={status:200,fileNmae:s,data:{base64:a},message:"图片上传成功"};i.orientation=null,i.opts.successCallback&&i.opts.successCallback(o,e)},g.readAsDataURL(s)}if(navigator.userAgent.match(/iphone/i),navigator.userAgent.match(/Android/i)){var d=new o;base64=d.encode(u.getImageData(0,0,n,r),100*i.opts.quality)}}var i=this;$("<img />").on("load",function(){s(this,t,a)}).error(function(){s(this,t,a)}).attr("src",t)},s.prototype.transformCoordinate=function(t,e,a,s){switch(s){case 5:case 6:case 7:case 8:t.width=a,t.height=e;break;default:t.width=e,t.height=a}var i=t.getContext("2d");switch(s){case 1:break;case 2:i.translate(e,0),i.scale(-1,1);break;case 3:i.translate(e,a),i.rotate(Math.PI);break;case 4:i.translate(0,a),i.scale(1,-1);break;case 5:i.rotate(.5*Math.PI),i.scale(1,-1);break;case 6:i.rotate(.5*Math.PI),i.translate(0,-a);break;case 7:i.rotate(.5*Math.PI),i.translate(e,-a),i.scale(-1,1);break;case 8:i.rotate(-.5*Math.PI),i.translate(-e,0)}},a.exports=s});
;define("common:widget/ui/upload-image/upload-image.js",function(a,e,t){"use strict";var i=a("underscore"),s=a("common:widget/ui/tips/tips.js"),d=a("common:widget/ui/upload-image/resize-image.js"),o=a("common:widget/ui/page-dace/page-dace.js"),o=a("common:widget/ui/page-dace/page-dace.js"),n=__daceDataNameOfPage,u={uploadIMG:"/bbs/uploadimg"},l={init:function(){var a=this;this.$wrap=$("#J_uploadImageWrap"),this.$wrap.length&&(this.maxCount=0,this.$buttonAdd=$(".add-image"),$(".J_bind_addImage").on("click",function(){return HPM.isLogin?HPM.exam_paper_url?!1:($(".has-upload-list").length||(a.maxCount=0),a.maxCount>=6?(s("抱歉，最多可以添加6张图片"),!1):void $(".J_buttonUploadImage").trigger("click")):void HPM.popLogin()}),new d($(".J_buttonUploadImage"),{width:640,quality:.8,successCallback:function(e){a.$buttonAdd.show(),a.$wrap.show(),a.createList(e)}}),this.bind())},bind:function(){var a=this;$(".upload-image").delegate(".J_buttonDeleteImage","click",function(e){var t=$(e.target),i=t.parents(".has-upload-list");a.maxCount--,i.remove(),0==a.maxCount?a.$buttonAdd.hide():a.$buttonAdd.show(),o.send(n+"_delete")}),new d($(".J_buttonNewImage"),{width:640,quality:.8,successCallback:function(a,e){if(200===a.status){var t=e.parents(".has-upload-list").find(".J_loadImage");return void t.attr("data-url",a.data.base64).css({"background-image":"url("+a.data.base64+")"})}s(a.message)}})},createList:function(a){var e=['<div class="has-upload-list">','<div class="load-image J_loadImage" data-url="<@=img@>" style="background-image: url(<@=img@>)"></div>','<span class="button-delete J_buttonDeleteImage"></span>','<input type="file" name="files[]" class="button-upload-image J_buttonNewImage" accept="image/*">','<div class="mask"></div>',"</div>"].join(""),t=['<div class="has-upload-list">','<div class="load-image J_loadImage" data-url="<@=img@>" style="background-image: url(<@=img@>)"></div>','<span class="button-delete J_buttonDeleteImage"></span>','<input type="file" name="files[]" class="button-upload-image J_buttonNewImage" accept="image/*">','<i class="gif-icon-upload"></i>','<div class="mask"></div>',"</div>"].join(""),d="";if(200===a.status){if(d=a.data.base64,/\.(gif|GIF)$/.test(a.fileNmae.name))var u=i.template(t,{img:d});else var u=i.template(e,{img:d});return $(".add-image").before(u),this.maxCount++,this.maxCount>=6&&this.$buttonAdd.hide(),void o.send(n+"_photo")}s(a.message)},uploadIMG:function(a){var e=this.$wrap.find(".J_loadImage");if(e.length){var t=[];e.each(function(){t.push($(this).attr("data-url"))}),$.ajax({url:u.uploadIMG,type:"POST",data:{files:encodeURIComponent(t)},dataType:"json",success:function(){a&&a()}})}else a&&a()}};t.exports=l});
;define("common:widget/ui-events/ui-events.js",function(e,t,n){function r(){}function i(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function s(e){return function(){return this[e].apply(this,arguments)}}var o=r.prototype;o.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp){t={};for(n in r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n])}else t=r[e]||(r[e]=[]);return t},o.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},o.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},o.addListener=function(e,t){var n,r=this.getListenersAsObject(e),s="object"==typeof t;for(n in r)r.hasOwnProperty(n)&&-1===i(r[n],t)&&r[n].push(s?t:{listener:t,once:!1});return this},o.on=s("addListener"),o.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},o.once=s("addOnceListener"),o.defineEvent=function(e){return this.getListeners(e),this},o.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},o.removeListener=function(e,t){var n,r,s=this.getListenersAsObject(e);for(r in s)s.hasOwnProperty(r)&&(n=i(s[r],t),-1!==n&&s[r].splice(n,1));return this},o.off=s("removeListener"),o.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},o.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},o.manipulateListeners=function(e,t,n){var r,i,s=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)s.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?s.call(this,r,i):o.call(this,r,i));return this},o.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},o.removeAllListeners=s("removeEvent"),o.emitEvent=function(e,t){var n,r,i,s,o,u=this.getListenersAsObject(e);for(s in u)if(u.hasOwnProperty(s))for(n=u[s].slice(0),i=0;i<n.length;i++)r=n[i],r.once===!0&&this.removeListener(e,r.listener),o=r.listener.apply(this,t||[]),o===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},o.trigger=s("emitEvent"),o.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},o.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},o._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},o._getEvents=function(){return this._events||(this._events={})},"function"==typeof define&&define.amd?define(function(){return r}):"object"==typeof n&&n.exports?n.exports=r:t.EventEmitter=r});
;define("common:widget/ui-toast/ui-toast.js",function(t,i,n){var e=t("common:widget/ui-events/ui-events.js"),s=new e,a=null,o={toast:function(t){function i(){var t=$(window),i=t.width(),e=t.height(),s=t.scrollTop(),a=t.scrollLeft(),o=Math.max(n.width(),100),l=s+e/3,c=a+(i-o)/2;return{top:l,left:c}}if(t&&t.length){var n=this._$toast;if(!n){var e='<div class="m-toast" id="J_toast"><p></p></div>';$("body").append(e),n=this._$toast=$("#J_toast")}a=null,clearTimeout(a),n.removeClass("m-toast-hide").show().find("p").html(t);var s=i();n.css({top:s.top,left:s.left}),a=setTimeout(function(){clearTimeout(a),n.addClass("m-toast-hide"),setTimeout(function(){n.hide()},400)},1130)}},count:function(t,i,n){var e=$(t),s={top:Math.floor(e.offset().top-15)};n&&"right"==n?s.right=30:s.left=Math.floor(e.offset().left+30);var a=$("#J_tipCount");if(a.length)a.html(i);else{var o='<div id="J_tipCount" class="m-tip-count">'+i+"</div>";$("body").append(o),a=$("#J_tipCount")}a.show().css(s).addClass("transform-tip-count").cssEnd(function(){$(this).removeClass("transform-tip-count").hide()})},update:function(t,i,n){if(t.html(i.html),i.cancelHandler){var e=n+"_cancel";s.removeAllListeners(e),s.on(e,i.cancelHandler)}if(i.submitHandler){var a=n+"_submit";s.removeAllListeners(a),s.on(a,i.submitHandler)}},alert:function(t){var i="alert",n=$.extend({title:"",content:"",align:"center",isButton:!0,submitHandler:function(){},submitText:"确认"},t),e="";if(n.isButton&&(e='<div class="btn-box clearfix"><span class="submit">'+n.submitText+"</span></div>"),n.html=['<div class="toast-player">','<div class="content text-',n.align,'">',n.title?"<h2>"+n.title+"</h2>":"",'<div class="main-content">',n.content,"</div></div>",e,"</div>"].join(""),this.$alert)t&&this.update(this.$alert,n,i),this.$alert.show();else{this.$alert=$("<div class='toast-mask'></div>").html(n.html),$("body").append(this.$alert);var a=this,o=i+"_hide",l=i+"_submit",c=function(){a.$alert.hide()};s.on(o,c),s.on(l,n.submitHandler),this.$alert.on("click",function(t){var i=t.target,n=i.tagName.toLowerCase(),e=$(i);return e.hasClass("submit")?(s.emit(o),void s.emit(l)):void(e.hasClass("content")||"h2"===n||"p"===n||s.emit(o))})}},confirm:function(t){var i="confirm",n=$.extend({title:"",content:"",align:"center",submitHandler:function(){},submitText:"确认",cancelText:"取消",cancelHandler:function(){}},t);if(n.html=['<div class="toast-player">','<div class="content"><h2>',n.title,'</h2><div class="main-content">',n.content,"</div></div>",'<div class="btn-box clearfix">','<span class="cancel">',n.cancelText,"</span>",'<span class="submit">',n.submitText,"</span>","</div>","</div>"].join(""),this.$confirm)t&&this.update(this.$confirm,n,i),this.$confirm.show();else{this.$confirm=$("<div class='toast-mask'></div>").html(n.html),$("body").append(this.$confirm);var e=this,a=function(){e.$confirm.hide()},o=i+"_hide",l=i+"_cancel",c=i+"_submit";s.on(o,a),s.on(l,n.cancelHandler),s.on(c,n.submitHandler),this.$confirm.on("click",function(t){var i=t.target,n=i.tagName.toLowerCase(),e=$(i);return e.hasClass("cancel")?(s.emit(o),void s.emit(l)):e.hasClass("submit")?(s.emit(o),void s.emit(c)):void(e.hasClass("content")||"h2"===n||"p"===n||s.emit(o))})}}};$.fn.cssEnd=function(t){var i="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";return this.one(i,t),this},n.exports=o});
;define("common:widget/ui-vote/ui-vote.js",function(t,e,i){function o(t,e){this.target=t,this.voteId=e.voteId,this.type=e.type||1,this.title=e.title||"",this.options=e.list||[],this.selected=e.voteSelected,this.optionMax=e.voteMax||1,this.count=e.count||0,this.groupName=this.getItemId(),this.container=null,this.is_m=e.is_m,this.init()}var n=t("common:widget/ui-toast/ui-toast.js"),s=function(){var t={getVote:"https://snsvote.hupu.com/ShowInner.php",saveVote:"https://m.hupu.com/bbs/thread/vote"};return t.ready=!0,t},a=0;o.getVote=function(t,e){$.ajax({type:"GET",url:s.getVote,xhrFields:{withCredentials:!0},data:{voteid:t,showtype:"touch",t:(new Date).getTime()},dataType:"json",success:function(i){var o={};i.voteclass=parseInt(i.voteclass,10)||1,o.voteId=t,o.type=i.canVote?1==i.voteclass?2:3:1,o.title=i.title,o.voteMax=i.voteclass,o.list=i.votetext,o.count=parseInt(i.votepnum,10),o.voteSelected=i.voteInfo?i.voteInfo.split(","):[],e(o)}})},o.postVote=function(t,e,i){$.ajax({type:"GET",url:s.saveVote,async:!1,xhrFields:{withCredentials:!0},data:{voteid:t,vote:e.join("|")},dataType:"jsonp",jsonp:"jsoncallback",success:function(t){t&&1==t.code?i&&i():t&&t.info&&n.toast(t.info)}})},o.prototype={init:function(){this.createContainer(),this.render(),this.bindEvent()},getItemId:function(){return"votegroup_"+ ++a},render:function(){switch(this.type){case 1:this.createShow();break;case 2:this.createForm("single");break;case 3:this.createForm("multiselect")}},createShow:function(){var t=[],e=this;this.options.forEach(function(i,o){var n=e.count>0?(100*i.num/e.count).toFixed(1):0,s=~$.inArray(o+1+"",e.selected),a=i.title+(s?"（已选）":"");t.push("<li>",'<div class="vote-option-title">',a,"</div>",'<div class="vote-detail">','<div class="vote-progress">','<div class="vote-inner" style="width:',n,'%"></div>',"</div>",'<div class="vote-count">',i.num,"票</div>",'<div class="vote-percent">',n,"%</div>","</div>","</li>")});var i=["<ul>",t.join(""),"</ul>"].join("");this.$content.append(i)},createForm:function(t){var e="single"===t?"radio":"checkbox",i=this,o=[];this.options.forEach(function(t,n){var s=i.getItemId(),a=n!=i.options.length-1?"vote-selected":"";o.push('<li class="',a,'">','<input type="',e,'" value="',n+1,'" name="',i.groupName,'" id="',s,'" class="with-gap">','<label for="',s,'">',t.title,"</label>","</li>")});var n=["<ul>",o.join(""),"</ul>"].join("");this.$content.append(n)},createContainer:function(){if(this.is_m)var t=["共有"+this.count+"人投票","投票"][this.type>1?1:0];else var t=["共有"+this.count+"人投票（你已投票）","投票"][this.type>1?1:0];var e=1===this.type?"vote-disabled":"",i=this.optionMax>1?"（多选）":"（单选）";this.container=document.createElement("div"),this.$container=$(this.container).addClass("vote-wrapper"),this.$content=$("<div>").addClass("vote-main"),this.$title=$("<h2>").text(this.title+i),this.$bottom=$("<div>").addClass("vote-bottom "+e).text(t),this.$container.attr("data-vote",this.voteId),this.$content.append(this.$title),this.$container.append(this.$content),this.$container.append(this.$bottom),this.target.parentNode.replaceChild(this.container,this.target)},bindEvent:function(){if(1!=this.type){var t=this;this.$bottom.on("click",function(){var e=function(){var e=[];t.$container.find("input[name="+t.groupName+"]").each(function(t,i){i.checked&&e.push(i.value)}),e.length?e.length<=t.optionMax?o.postVote(t.voteId,e,function(){o.getVote(t.voteId,function(e){new o(t.getTarget(),e)})}):n.toast("无法提交，最多只能选择"+t.optionMax+"项"):n.toast("请选择投票选项")};"1"==HPM.isLogin?e():(HPM.popLogin(),window.location.href.indexOf("huya")>-1&&sa.track("huya_loginPopup",{platform:"m站"}))})}},getTarget:function(){return this.container}},i.exports=function(t,e){var i=t?t.getAttribute("data-vote"):"";i&&(s.ready||(s=s()),o.getVote(i,function(i){e?(i.is_m=!0,i.type=1):i.is_m=!1;new o(t,i)}))}});
;define("common:widget/ui-dace/ui-dace.js",function(e,n,t){var i=[],a=20;t.exports={init:function(){this.listenElement(),this.listenDace()},listenElement:function(){var e="ontouchstart"in window,n="dace-node",t=this.send;$("body").on(e?"click":"mousedown",function(e){for(var i=e.target;!i.getAttribute(n)&&"BODY"!==i.tagName&&(i=i.parentElement););if('BODY"'!==i.tagName){var a=i.getAttribute(n);t(a)}})},listenDace:function(){var e=this;this.interval=setInterval(function(){window.__dace&&window.__dace.sendEvent&&(clearInterval(e.interval),i&&i.length&&e.send())},5e3)},send:function(e){if(window.__dace){var n=window.__dace.sendEvent;e&&e.length&&n(e),i&&i.length&&(_.each(i,function(e){n(e)}),i=[])}else e&&e.length&&(i.length>=a&&i.shift(),i.push(e))}}});
;define("common:widget/top-nav/top-nav.js",function(t,i,s){var o=t("underscore"),n=t("common:widget/ui/util/util.js"),a=(t("common:widget/ui/tips/tips.js"),t("common:widget/ui/page-dace/page-dace.js")),h=$(window),e={init:function(t){$("#J_topPopBbsNav").length&&v.init(),this.hasSubNav=t,this.$nav=$("#J_mTopNav"),this.$nav.length&&(this.$topbar=this.$nav.find(".m-top-bar"),this.$buttonAllNav=this.$nav.find(".J_topNavButtonAllNav"),this.$buttonCloseNav=this.$nav.find(".J_topNavButtonCloseNav"),this.$oneNav=$("#J_topOneNav"),this.$buttonSearch=$(".search-link"),this.$topHeight=this.$topbar.height(),this.viewHeight=h.height(),this.oldTop=0,this.isClick=!1,this.isShow=!1,this.bind())},bind:function(){var t=this;this.$buttonAllNav.on("click",function(){return t.showNav(),!1}),this.hasSubNav&&(h.scroll(function(){t.scrollFiexd()}),$("#J_topMainNav a").on("click",function(){t.isClick&&a.send($(this).attr("dace-node")+"_stick")})),this.$buttonSearch.on("click",function(t){t.preventDefault(),!HPM.isLogin&&HPM.isIndex?HPM.popLogin():location.href=$(this).attr("href")});var i=document.body.clientWidth,s=i-225,o=$(".m-top-nav .title_len_1"),n=o.width();n>=s&&o&&o.css({width:s,overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",display:"block"})},onView:function(){var t=this;h.on("touchstart.toponenav",function(i){(this.isShow||!$(i.target).hasClass("m-one-nav")&&!$(i.target).parents(".m-one-nav").hasClass("m-one-nav"))&&t.hideNav()})},offView:function(){h.off("touchstart.toponenav")},showNav:function(){var t=this;this.isShow||(this.$buttonAllNav.hide(),this.$buttonCloseNav.show(),this.$oneNav.show().removeClass("topNavInDown").addClass("topNavInDown").cssEnd(function(){t.isShow=!0,$(this).removeClass("topNavInDown")}),this.onView())},hideNav:function(){var t=this;this.$buttonCloseNav.hide(),this.$buttonAllNav.show(),this.$oneNav.show().removeClass("topNavInUp").addClass("topNavInUp").cssEnd(function(){t.isShow=!1,$(this).hide().removeClass("topNavInUp")}),this.offView()},scrollFiexd:function(){var t=h.scrollTop(),i=0;i=t>=this.$topHeight?this.$topHeight:t,this.isClick=t>=this.viewHeight?!0:!1,i!=this.oldTop&&(this.oldTop=i,this.$nav[0].style[n.prefixStyle("transform")]="translate(0,-"+i+"px)"+n.translateZ())}},v={init:function(){this.$popup=$("#J_topPopBbsNav"),this.$tab=this.$popup.find(".J_popBbsNavList"),this.$list=this.$tab.find("li"),this.$content=this.$popup.find(".J_popBbsNavContent"),this.$buttonBbs=$(".J_topNavButtonNavBbs"),this.activeNumber=0,this.isShow=!1,this.autoHeight(),this.bind()},bind:function(){var t=this;this.$buttonBbs.on("click",function(){return t.isShow?t.hideNav():t.showNav(),!1}),this.$list.on("click",function(){t.activeNumber=$(this).index(),t.getReply($(this))})},onView:function(){var t=this;$("body").on("touchstart.popupbbsnav",function(i){$(i.target).hasClass("button-all-nav")||$(i.target).hasClass("popup-bbs-nav")||$(i.target).parents(".popup-bbs-nav").hasClass("popup-bbs-nav")||t.hideNav()})},offView:function(){$("body").off("touchstart.popupbbsnav")},showNav:function(){var t=this;this.isShow||(this.$popup.show().removeClass("topNavInLeft").addClass("topNavInLeft").cssEnd(function(){t.isShow=!0,$(this).removeClass("topNavInLeft")}),this.onView())},hideNav:function(){var t=this;this.$popup.removeClass("topNavInRight").addClass("topNavInRight").cssEnd(function(){t.isShow=!1,$(this).hide().removeClass("topNavInRight")}),this.offView()},getReply:function(t){this.$list.removeClass("active"),t.addClass("active");var i=o.template($("#top-nav-bbs-template").html(),{datas:HPM.bbsNavJson[this.activeNumber]});this.$content.html(i),this.autoHeight()},autoHeight:function(){var t=$(window).height()-$(".m-top-nav").height()-40;this.$popup.css({height:t}),this.$tab.css({height:t-2}),this.$content.css({height:t-2})}};$.fn.cssEnd=function(t){var i="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";return this.one(i,t),this},s.exports=e});
;define("common:widget/inner-tab/tab.js",function(n,i,t){var a=$(window);t.exports={init:function(){this.$nav=$("#J_fixednavTab"),this.$nav.length&&(this.navTop=this.$nav.offset().top,this.bind())},bind:function(){var n=this,i=null;a.scroll(function(){i=setTimeout(function(){n.scrollBind()},100)})},scrollBind:function(){var n=this,i=a.scrollTop();i>=n.navTop?n.$nav.addClass("nav-tab-fixed"):n.$nav.removeClass("nav-tab-fixed")}}});
;define("common:widget/click-image-show/click-image-show.js",function(i,t,e){function n(i,t,e){var n=1,a=0,r=0;return t>=i?(n=i/t,a=i,r=n*e):(a=t,r=e),{w:a,h:r}}function a(i){var t=/(\d+)_(\d+)\.gif$/i,e=r.isString(i)&&i.length?i.match(t):[],n={w:0,h:0};return r.isArray(e)&&3===e.length&&(n.w=parseInt(e[1],10),n.h=parseInt(e[2],10)),(n.h>1e4||n.w>1e4)&&(n.w=0,n.h=0),n}var r=i("underscore"),s=(i("common:widget/ui-dace/ui-dace.js"),{day:"//w10.hoopchina.com.cn/hybrid/resource/img/n_err_day.png",night:"//w10.hoopchina.com.cn/hybrid/resource/img/n_err_night.png",person:"//w10.hoopchina.com.cn/hybrid/resource/avatar/man.png"}),c={updateGifSize:function(i){var t=$(i).find(".lazy-gif img"),e=($(i).find("img").not(".emoji"),$(i).attr("id")),r=0;switch(e){case"detail-content":r=$(window).width()-20;break;default:r=$(i).find(".reply-content").eq(0).width()}0>=r&&(r=$(window).width()-60),$(t).each(function(i,t){var e=a(t.getAttribute("data-gif"));e.w>0&&e.h>0?(e=n(r,e.w,e.h),$(t).parents(".lazy-gif").css({width:e.w})):($(t).on("load",function(){t.getAttribute("data-src")||(e.w=this.width,e.h=this.height,e=n(r,e.w,e.h),$(t).parents(".lazy-gif").css({width:e.w}))}),t.complete&&$(t).parents(".lazy-gif").css({width:t.width}))})},listenImagesReplaceErr:function(i){$(i).each(function(i,t){var e=t.className,n=~t.className.indexOf("J-user-avatar-img"),a=GM&&GM.night?s.night:s.day;n&&(a=s.person),t.onerror=function(){var i=document.createElement("img");i.src=a,i.className=n?e:e+" onerror-img",t.parentNode.replaceChild(i,t)}})},getPicSize:function(i){var t=0;if(!i||!r.isString(i))return t;var e=/s_(\d+)_o/;return e.test(i)&&(t=Math.round(+i.match(e)[1]/1024),t>=1e3?t=(t/1024).toFixed(1)+"MB":t+="KB"),t},createAlbum:function(i,t){var e=0,n=[],a=0,s=this,c=i.getAttribute("data-src");r.each(t,function(t){var r=t.getAttribute("data-gif")||t.getAttribute("data_url")||t.getAttribute("data-src")||t.getAttribute("src"),d=r.indexOf("@");if(-1!=r.indexOf("gif@")&&(r=r.substring(0,d)),-1!=r.indexOf("@600w_1l_60q")||-1!=r.indexOf("@600w_1l_60q.webp")){var o=r.substring(0,d+1);r=o+"800w_1l"}/^(http|https)/i.test(r)||(r=location.protocol+r);var g=t.getAttribute("data-origin"),f=s.getPicSize(g);(i.src===t.src||c&&c===r)&&(e=a),n.push(g&&f?{url:$.trim(r),originSrc:$.trim(g),originSize:f,index:a}:{url:$.trim(r),index:a}),a++}),HupuBridge.send("hupu.album.view",{title:"",index:e,images:n})},renderGifs:function(i,t,e,n){var a=i.find("img");if(a.size()){var s=r.isUndefined(t)?r.isUndefined(GM.nopic)?!1:GM.nopic:t,c=r.isUndefined(e)?r.isUndefined(GM.night)?!1:GM.night:e,d=c?"icon_night":"icon_day";switch(n){case"news":var o=s?"first":"second";a.each(function(){var i=$(this);if(~i.attr("alt").indexOf("GIF")){i.wrap("<div class='gif-pic'></div>");var t=["<span class='gif_btn' data-load='",o,"' dace-node='gif_firstclick'>",i.attr("alt"),"<i class=",d,"></i>","</span>","<div class='ball-clip-rotate' style='display:none;'><div></div></div>"].join("");i.after(t),this.complete?i.next().show():i.on("load",function(){i.next().show(),i.off("load")})}}),i.delegate(".gif_btn","click",function(){$(this).hide().prev().attr("secondclick",1).trigger("click")});break;case"bbs":a.each(function(){var i=$(this);if(this.getAttribute("data-gif")){i.attr("secondclick",1),i.wrap("<div class='gif-pic'></div>");var t="<div class='ball-clip-rotate' style='display:none;'><div></div></div>";i.after(t)}})}}},showGifLoading:function(i){i.siblings(".ball-clip-rotate").show(),i.on("load",function(){i.siblings(".ball-clip-rotate").hide(),$(this).parents(".lazy-gif").find(".gif-icon").hide()})},handlerClickGif:function(i,t){var e=r.isUndefined(t)?r.isUndefined(GM.nopic)?!1:GM.nopic:t,n=$(i);if(e)i.getAttribute("secondclick")?(a=i.getAttribute("data-gif"),i.src=a,n.siblings(".gif_btn").hide(),this.showGifLoading(n),i.removeAttribute("data-gif"),i.removeAttribute("secondclick"),i.setAttribute("alt","gif")):n.attr("secondclick",1).siblings(".gif_btn").show();else{var a=i.getAttribute("data-gif");i.src=a,n.siblings(".gif_btn").hide(),this.showGifLoading(n),i.removeAttribute("data-gif"),i.setAttribute("alt","gif")}}};e.exports=c});
;define("common:widget/new-top-nav/new-top-nav.js",function(n,i,a){var e={init:function(){this.render(),this.bind()},render:function(){this.navWrap=$("#J-nav-wrap"),this.fixNav=this.navWrap.find(".main-nav-wrap");var n=window.screen.availWidth;355>n&&$(".sub-nav a.current_von").css("max-width","58%;"),n>380&&$(".sub-nav a").removeClass("current_von")},bind:function(){var n=this;!n.fixNav.hasClass("no-fixed")&&$("body").find("#J_fixednavTab").length<=0&&$(window).on("scroll",function(){$(this).scrollTop()>37?(n.fixNav.css("position","fixed"),n.fixNav.find(".triangle").hide(),$(document).trigger("page:showmsw")):(n.fixNav.css("position","relative"),n.fixNav.find(".triangle").show(),$(document).trigger("page:hidemsw"))})}};a.exports=e});
;define("common:widget/prediction-tips/prediction-tips.js",function(t,i,o){var n=t("underscore"),e={checkResult:"/predict/chkpredict"},s={ajaxinterval:36e4,showtime:1e4,topPos:$("#J_mTopNav").height(),init:function(){this.ajaxRoll()},ajaxRoll:function(){var t=this;this.timer=setInterval(function(){var i=function(i){200==i.code&&t.show(i.url)};t.ajax(e.checkResult,i)},this.ajaxinterval)},ajax:function(t,i,o){$.ajax({type:"POST",url:t,dataType:"json",timeout:3e3,success:i,error:o||function(){}})},show:function(t){var i=this;$("body").append(n.template($("#J_predictNotice").html(),{url:t})),this.tips=$("#J_preTips"),this.setTop(),$(window).on("scroll",function(){i.setTop()}),setTimeout(function(){i.tips.addClass("active")},10),setTimeout(function(){i.tips.removeClass("active").one("transitionend webkitTransitionEnd mozTransitionEnd oTransitionEnd",function(){$(this).remove()})},this.showtime)},setTop:function(){var t=this.topPos<$(window).scrollTop()?0:44-$(window).scrollTop();this.tips.css({top:t})}};o.exports=s});
;!function(){function e(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var o=new RegExp("[\\?&]"+e+"=([^&#]*)"),i=o.exec(location.search);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))}var o=require("common:widget/ui/page-dace/page-dace.js"),i=require("common:widget/ui/target-jump/target-jump.js"),n=require("common:widget/ui/page-tools/page-tools.js"),t=require("common:widget/ui/section-exposure/section-exposure.js"),r=window.navigator.userAgent,u=~r.indexOf("kanqiu")?1:0,c=~r.indexOf("hupufootball")?1:0,a=u||c;$(document).ready(function(){var r="ontouchstart"in window;if($("body").on(r?"click":"mousedown",function(e){o.init(e),i.init(e)}),t.init(),a||"tieba"===e("m_from")||n.init(),document.cookie.indexOf("__nmj")>0){var u=new Date;u.setTime(u.getTime()-1e3),document.cookie="__nmj=1; path=/;domain=.hupu.com;expires="+u.toGMTString()}})}(window);